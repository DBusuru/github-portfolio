var rrweb=function(ee){"use strict";var O;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(O||(O={}));function wr(t){return t.nodeType===t.ELEMENT_NODE}function Xe(t){const e=t?.host;return Boolean(e?.shadowRoot===t)}function qe(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function co(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function uo(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const r=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?r.push("layer"):t.layerName&&r.push(`layer(${t.layerName})`),t.supportsText&&r.push(`supports(${t.supportsText})`),t.media.length&&r.push(t.media.mediaText),r.join(" ")+";"}function ct(t){try{const e=t.rules||t.cssRules;return e?co(Array.from(e,Er).join("")):null}catch{return null}}function Er(t){let e;if(po(t))try{e=ct(t.styleSheet)||uo(t)}catch{}else if(mo(t)&&t.selectorText.includes(":"))return ho(t.cssText);return e||t.cssText}function ho(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function po(t){return"styleSheet"in t}function mo(t){return"selectorText"in t}class Ot{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var r;if(!e)return-1;const n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Mr(){return new Ot}function Rt({element:t,maskInputOptions:e,tagName:r,type:n,value:o,maskInputFn:i}){let l=o||"";const a=n&&we(n);return(e[r.toLowerCase()]||a&&e[a])&&(i?l=i(l,t):l="*".repeat(l.length)),l}function we(t){return t.toLowerCase()}const Cr="__rrweb_original__";function fo(t){const e=t.getContext("2d");if(!e)return!0;const r=50;for(let n=0;n<t.width;n+=r)for(let o=0;o<t.height;o+=r){const i=e.getImageData,l=Cr in i?i[Cr]:i;if(new Uint32Array(l.call(e,n,o,Math.min(r,t.width-n),Math.min(r,t.height-o)).data.buffer).some(a=>a!==0))return!1}return!0}function go(t,e){return!t||!e||t.type!==e.type?!1:t.type===O.Document?t.compatMode===e.compatMode:t.type===O.DocumentType?t.name===e.name&&t.publicId===e.publicId&&t.systemId===e.systemId:t.type===O.Comment||t.type===O.Text||t.type===O.CDATA?t.textContent===e.textContent:t.type===O.Element?t.tagName===e.tagName&&JSON.stringify(t.attributes)===JSON.stringify(e.attributes)&&t.isSVG===e.isSVG&&t.needBlock===e.needBlock:!1}function xt(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?we(e):null}function Tr(t,e){var r;let n;try{n=new URL(t,e??window.location.href)}catch{return null}const o=/\.([0-9a-z]+)(?:$)/i,i=n.pathname.match(o);return(r=i?.[1])!==null&&r!==void 0?r:null}let yo=1;const vo=new RegExp("[^a-z0-9-_:]"),Je=-2;function Nr(){return yo++}function So(t){if(t instanceof HTMLFormElement)return"form";const e=we(t.tagName);return vo.test(e)?"div":e}function bo(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let Ae,Ir;const wo=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Eo=/^(?:[a-z+]+:)?\/\//i,Mo=/^www\..*/i,Co=/^(data:)([^,]*),(.*)/i;function ut(t,e){return(t||"").replace(wo,(r,n,o,i,l,a)=>{const s=o||l||a,c=n||i||"";if(!s)return r;if(Eo.test(s)||Mo.test(s))return`url(${c}${s}${c})`;if(Co.test(s))return`url(${c}${s}${c})`;if(s[0]==="/")return`url(${c}${bo(e)+s}${c})`;const u=e.split("/"),d=s.split("/");u.pop();for(const h of d)h!=="."&&(h===".."?u.pop():u.push(h));return`url(${c}${u.join("/")}${c})`})}const To=/^[^ \t\n\r\u000c]+/,No=/^[, \t\n\r\u000c]+/;function Io(t,e){if(e.trim()==="")return e;let r=0;function n(i){let l;const a=i.exec(e.substring(r));return a?(l=a[0],r+=l.length,l):""}const o=[];for(;n(No),!(r>=e.length);){let i=n(To);if(i.slice(-1)===",")i=dt(t,i.substring(0,i.length-1)),o.push(i);else{let l="";i=dt(t,i);let a=!1;for(;;){const s=e.charAt(r);if(s===""){o.push((i+l).trim());break}else if(a)s===")"&&(a=!1);else if(s===","){r+=1,o.push((i+l).trim());break}else s==="("&&(a=!0);l+=s,r+=1}}}return o.join(", ")}function dt(t,e){if(!e||e.trim()==="")return e;const r=t.createElement("a");return r.href=e,r.href}function ko(t){return Boolean(t.tagName==="svg"||t.ownerSVGElement)}function At(){const t=document.createElement("a");return t.href="",t.href}function kr(t,e,r,n){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?dt(t,n):r==="srcset"?Io(t,n):r==="style"?ut(n,At()):e==="object"&&r==="data"?dt(t,n):n)}function Dr(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}function Do(t,e,r){try{if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const o=t.classList[n];if(e.test(o))return!0}if(r)return t.matches(r)}catch{}return!1}function ht(t,e,r){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return r?ht(t.parentNode,e,r):!1;for(let n=t.classList.length;n--;){const o=t.classList[n];if(e.test(o))return!0}return r?ht(t.parentNode,e,r):!1}function Or(t,e,r,n){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(typeof e=="string"){if(n){if(o.closest(`.${e}`))return!0}else if(o.classList.contains(e))return!0}else if(ht(o,e,n))return!0;if(r){if(n){if(o.closest(r))return!0}else if(o.matches(r))return!0}}catch{}return!1}function Oo(t,e,r){const n=t.contentWindow;if(!n)return;let o=!1,i;try{i=n.document.readyState}catch{return}if(i!=="complete"){const a=setTimeout(()=>{o||(e(),o=!0)},r);t.addEventListener("load",()=>{clearTimeout(a),o=!0,e()});return}const l="about:blank";if(n.location.href!==l||t.src===l||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function Ro(t,e,r){let n=!1,o;try{o=t.sheet}catch{return}if(o)return;const i=setTimeout(()=>{n||(e(),n=!0)},r);t.addEventListener("load",()=>{clearTimeout(i),n=!0,e()})}function xo(t,e){const{doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:l,inlineStylesheet:a,maskInputOptions:s={},maskTextFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:h,recordCanvas:m,keepIframeSrcFn:g,newlyAddedElement:p=!1}=e,v=Ao(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:O.Document,childNodes:[],compatMode:t.compatMode}:{type:O.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:O.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:v};case t.ELEMENT_NODE:return _o(t,{doc:r,blockClass:o,blockSelector:i,inlineStylesheet:a,maskInputOptions:s,maskInputFn:u,dataURLOptions:d,inlineImages:h,recordCanvas:m,keepIframeSrcFn:g,newlyAddedElement:p,rootId:v});case t.TEXT_NODE:return Lo(t,{needsMask:l,maskTextFn:c,rootId:v});case t.CDATA_SECTION_NODE:return{type:O.CDATA,textContent:"",rootId:v};case t.COMMENT_NODE:return{type:O.Comment,textContent:t.textContent||"",rootId:v};default:return!1}}function Ao(t,e){if(!e.hasNode(t))return;const r=e.getId(t);return r===1?void 0:r}function Lo(t,e){var r;const{needsMask:n,maskTextFn:o,rootId:i}=e,l=t.parentNode&&t.parentNode.tagName;let a=t.textContent;const s=l==="STYLE"?!0:void 0,c=l==="SCRIPT"?!0:void 0;if(s&&a){try{t.nextSibling||t.previousSibling||!((r=t.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(a=ct(t.parentNode.sheet))}catch(u){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${u}`,t)}a=ut(a,At())}return c&&(a="SCRIPT_PLACEHOLDER"),!s&&!c&&a&&n&&(a=o?o(a,t.parentElement):a.replace(/[\S]/g,"*")),{type:O.Text,textContent:a||"",isStyle:s,rootId:i}}function _o(t,e){const{doc:r,blockClass:n,blockSelector:o,inlineStylesheet:i,maskInputOptions:l={},maskInputFn:a,dataURLOptions:s={},inlineImages:c,recordCanvas:u,keepIframeSrcFn:d,newlyAddedElement:h=!1,rootId:m}=e,g=Do(t,n,o),p=So(t);let v={};const f=t.attributes.length;for(let y=0;y<f;y++){const w=t.attributes[y];Dr(p,w.name,w.value)||(v[w.name]=kr(r,p,we(w.name),w.value))}if(p==="link"&&i){const y=Array.from(r.styleSheets).find(T=>T.href===t.href);let w=null;y&&(w=ct(y)),w&&(delete v.rel,delete v.href,v._cssText=ut(w,y.href))}if(p==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const y=ct(t.sheet);y&&(v._cssText=ut(y,At()))}if(p==="input"||p==="textarea"||p==="select"){const y=t.value,w=t.checked;v.type!=="radio"&&v.type!=="checkbox"&&v.type!=="submit"&&v.type!=="button"&&y?v.value=Rt({element:t,type:xt(t),tagName:p,value:y,maskInputOptions:l,maskInputFn:a}):w&&(v.checked=w)}if(p==="option"&&(t.selected&&!l.select?v.selected=!0:delete v.selected),p==="canvas"&&u){if(t.__context==="2d")fo(t)||(v.rr_dataURL=t.toDataURL(s.type,s.quality));else if(!("__context"in t)){const y=t.toDataURL(s.type,s.quality),w=document.createElement("canvas");w.width=t.width,w.height=t.height;const T=w.toDataURL(s.type,s.quality);y!==T&&(v.rr_dataURL=y)}}if(p==="img"&&c){Ae||(Ae=r.createElement("canvas"),Ir=Ae.getContext("2d"));const y=t,w=y.crossOrigin;y.crossOrigin="anonymous";const T=()=>{y.removeEventListener("load",T);try{Ae.width=y.naturalWidth,Ae.height=y.naturalHeight,Ir.drawImage(y,0,0),v.rr_dataURL=Ae.toDataURL(s.type,s.quality)}catch(D){console.warn(`Cannot inline img src=${y.currentSrc}! Error: ${D}`)}w?v.crossOrigin=w:y.removeAttribute("crossorigin")};y.complete&&y.naturalWidth!==0?T():y.addEventListener("load",T)}if(p==="audio"||p==="video"){const y=v;y.rr_mediaState=t.paused?"paused":"played",y.rr_mediaCurrentTime=t.currentTime,y.rr_mediaPlaybackRate=t.playbackRate,y.rr_mediaMuted=t.muted,y.rr_mediaLoop=t.loop,y.rr_mediaVolume=t.volume}if(h||(t.scrollLeft&&(v.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(v.rr_scrollTop=t.scrollTop)),g){const{width:y,height:w}=t.getBoundingClientRect();v={class:v.class,rr_width:`${y}px`,rr_height:`${w}px`}}p==="iframe"&&!d(v.src)&&(t.contentDocument||(v.rr_src=v.src),delete v.src);let S;try{customElements.get(p)&&(S=!0)}catch{}return{type:O.Element,tagName:p,attributes:v,childNodes:[],isSVG:ko(t)||void 0,needBlock:g,rootId:m,isCustom:S}}function G(t){return t==null?"":t.toLowerCase()}function Fo(t,e){return!!(e.comment&&t.type===O.Comment||t.type===O.Element&&(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&Tr(t.attributes.href)==="js")||e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(G(t.attributes.name).match(/^msapplication-tile(image|color)$/)||G(t.attributes.name)==="application-name"||G(t.attributes.rel)==="icon"||G(t.attributes.rel)==="apple-touch-icon"||G(t.attributes.rel)==="shortcut icon"))||t.tagName==="meta"&&(e.headMetaDescKeywords&&G(t.attributes.name).match(/^description|keywords$/)||e.headMetaSocial&&(G(t.attributes.property).match(/^(og|twitter|fb):/)||G(t.attributes.name).match(/^(og|twitter):/)||G(t.attributes.name)==="pinterest")||e.headMetaRobots&&(G(t.attributes.name)==="robots"||G(t.attributes.name)==="googlebot"||G(t.attributes.name)==="bingbot")||e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0||e.headMetaAuthorship&&(G(t.attributes.name)==="author"||G(t.attributes.name)==="generator"||G(t.attributes.name)==="framework"||G(t.attributes.name)==="publisher"||G(t.attributes.name)==="progid"||G(t.attributes.property).match(/^article:/)||G(t.attributes.property).match(/^product:/))||e.headMetaVerification&&(G(t.attributes.name)==="google-site-verification"||G(t.attributes.name)==="yandex-verification"||G(t.attributes.name)==="csrf-token"||G(t.attributes.name)==="p:domain_verify"||G(t.attributes.name)==="verify-v1"||G(t.attributes.name)==="verification"||G(t.attributes.name)==="shopify-checkout-api-token"))))}function Le(t,e){const{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:a,skipChild:s=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:h,slimDOMOptions:m,dataURLOptions:g={},inlineImages:p=!1,recordCanvas:v=!1,onSerialize:f,onIframeLoad:S,iframeLoadTimeout:y=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:D=()=>!1,newlyAddedElement:A=!1}=e;let{needsMask:C}=e,{preserveWhiteSpace:z=!0}=e;!C&&t.childNodes&&(C=Or(t,l,a,C===void 0));const V=xo(t,{doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:C,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,dataURLOptions:g,inlineImages:p,recordCanvas:v,keepIframeSrcFn:D,newlyAddedElement:A});if(!V)return console.warn(t,"not serialized"),null;let re;n.hasNode(t)?re=n.getId(t):Fo(V,m)||!z&&V.type===O.Text&&!V.isStyle&&!V.textContent.replace(/^\s+|\s+$/gm,"").length?re=Je:re=Nr();const k=Object.assign(V,{id:re});if(n.add(t,k),re===Je)return null;f&&f(t);let Y=!s;if(k.type===O.Element){Y=Y&&!k.needBlock,delete k.needBlock;const P=t.shadowRoot;P&&qe(P)&&(k.isShadowHost=!0)}if((k.type===O.Document||k.type===O.Element)&&Y){m.headWhitespace&&k.type===O.Element&&k.tagName==="head"&&(z=!1);const P={doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:C,maskTextClass:l,maskTextSelector:a,skipChild:s,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:m,dataURLOptions:g,inlineImages:p,recordCanvas:v,preserveWhiteSpace:z,onSerialize:f,onIframeLoad:S,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:T,keepIframeSrcFn:D};if(!(k.type===O.Element&&k.tagName==="textarea"&&k.attributes.value!==void 0))for(const H of Array.from(t.childNodes)){const $=Le(H,P);$&&k.childNodes.push($)}if(wr(t)&&t.shadowRoot)for(const H of Array.from(t.shadowRoot.childNodes)){const $=Le(H,P);$&&(qe(t.shadowRoot)&&($.isShadow=!0),k.childNodes.push($))}}return t.parentNode&&Xe(t.parentNode)&&qe(t.parentNode)&&(k.isShadow=!0),k.type===O.Element&&k.tagName==="iframe"&&Oo(t,()=>{const P=t.contentDocument;if(P&&S){const H=Le(P,{doc:P,mirror:n,blockClass:o,blockSelector:i,needsMask:C,maskTextClass:l,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:m,dataURLOptions:g,inlineImages:p,recordCanvas:v,preserveWhiteSpace:z,onSerialize:f,onIframeLoad:S,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:T,keepIframeSrcFn:D});H&&S(t,H)}},y),k.type===O.Element&&k.tagName==="link"&&typeof k.attributes.rel=="string"&&(k.attributes.rel==="stylesheet"||k.attributes.rel==="preload"&&typeof k.attributes.href=="string"&&Tr(k.attributes.href)==="css")&&Ro(t,()=>{if(w){const P=Le(t,{doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:C,maskTextClass:l,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:m,dataURLOptions:g,inlineImages:p,recordCanvas:v,preserveWhiteSpace:z,onSerialize:f,onIframeLoad:S,iframeLoadTimeout:y,onStylesheetLoad:w,stylesheetLoadTimeout:T,keepIframeSrcFn:D});P&&w(t,P)}},T),k}function Po(t,e){const{mirror:r=new Ot,blockClass:n="rr-block",blockSelector:o=null,maskTextClass:i="rr-mask",maskTextSelector:l=null,inlineStylesheet:a=!0,inlineImages:s=!1,recordCanvas:c=!1,maskAllInputs:u=!1,maskTextFn:d,maskInputFn:h,slimDOM:m=!1,dataURLOptions:g,preserveWhiteSpace:p,onSerialize:v,onIframeLoad:f,iframeLoadTimeout:S,onStylesheetLoad:y,stylesheetLoadTimeout:w,keepIframeSrcFn:T=()=>!1}=e||{};return Le(t,{doc:t,mirror:r,blockClass:n,blockSelector:o,maskTextClass:i,maskTextSelector:l,skipChild:!1,inlineStylesheet:a,maskInputOptions:u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:u===!1?{password:!0}:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:m===!0||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:m==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:m===!1?{}:m,dataURLOptions:g,inlineImages:s,recordCanvas:c,preserveWhiteSpace:p,onSerialize:v,onIframeLoad:f,iframeLoadTimeout:S,onStylesheetLoad:y,stylesheetLoadTimeout:w,keepIframeSrcFn:T,newlyAddedElement:!1})}const Rr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function $o(t,e={}){let r=1,n=1;function o(E){const b=E.match(/\n/g);b&&(r+=b.length);const I=E.lastIndexOf(`
`);n=I===-1?n+E.length:E.length-I}function i(){const E={line:r,column:n};return b=>(b.position=new l(E),g(),b)}class l{constructor(b){this.start=b,this.end={line:r,column:n},this.source=e.source}}l.prototype.content=t;const a=[];function s(E){const b=new Error(`${e.source||""}:${r}:${n}: ${E}`);if(b.reason=E,b.filename=e.source,b.line=r,b.column=n,b.source=t,e.silent)a.push(b);else throw b}function c(){const E=h();return{type:"stylesheet",stylesheet:{source:e.source,rules:E,parsingErrors:a}}}function u(){return m(/^{\s*/)}function d(){return m(/^}/)}function h(){let E;const b=[];for(g(),p(b);t.length&&t.charAt(0)!=="}"&&(E=J()||ne());)E&&(b.push(E),p(b));return b}function m(E){const b=E.exec(t);if(!b)return;const I=b[0];return o(I),t=t.slice(I.length),b}function g(){m(/^\s*/)}function p(E=[]){let b;for(;b=v();)b&&E.push(b),b=v();return E}function v(){const E=i();if(t.charAt(0)!=="/"||t.charAt(1)!=="*")return;let b=2;for(;t.charAt(b)!==""&&(t.charAt(b)!=="*"||t.charAt(b+1)!=="/");)++b;if(b+=2,t.charAt(b-1)==="")return s("End of comment missing");const I=t.slice(2,b-2);return n+=2,o(I),t=t.slice(b),n+=2,E({type:"comment",comment:I})}function f(){for(g();t[0]=="}";)s("extra closing bracket"),t=t.slice(1),g();const E=m(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(!E)return;const b=E[0].trim().replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,I=>I.replace(/,/g,"\u200C"));return S(b).map(I=>I.replace(/\u200C/g,",").trim())}function S(E){const b=[];let I="",_=0,j=0;for(const B of E)B==="("?_++:B===")"?_--:B==="["?j++:B==="]"&&j--,B===","&&_===0&&j===0?(b.push(I),I=""):I+=B;return I&&b.push(I),b}function y(){const E=i(),b=m(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!b)return;const I=Ee(b[0]);if(!m(/^:\s*/))return s("property missing ':'");const _=m(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),j=E({type:"declaration",property:I.replace(Rr,""),value:_?Ee(_[0]).replace(Rr,""):""});return m(/^[;\s]*/),j}function w(){const E=[];if(!u())return s("missing '{'");p(E);let b;for(;b=y();)b!==!1&&(E.push(b),p(E)),b=y();return d()?E:s("missing '}'")}function T(){let E;const b=[],I=i();for(;E=m(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)b.push(E[1]),m(/^,\s*/);if(b.length)return I({type:"keyframe",values:b,declarations:w()})}function D(){const E=i();let b=m(/^@([-\w]+)?keyframes\s*/);if(!b)return;const I=b[1];if(b=m(/^([-\w]+)\s*/),!b)return s("@keyframes missing name");const _=b[1];if(!u())return s("@keyframes missing '{'");let j,B=p();for(;j=T();)B.push(j),B=B.concat(p());return d()?E({type:"keyframes",name:_,vendor:I,keyframes:B}):s("@keyframes missing '}'")}function A(){const E=i(),b=m(/^@supports *([^{]+)/);if(!b)return;const I=Ee(b[1]);if(!u())return s("@supports missing '{'");const _=p().concat(h());return d()?E({type:"supports",supports:I,rules:_}):s("@supports missing '}'")}function C(){const E=i();if(!m(/^@host\s*/))return;if(!u())return s("@host missing '{'");const b=p().concat(h());return d()?E({type:"host",rules:b}):s("@host missing '}'")}function z(){const E=i(),b=m(/^@media *([^{]+)/);if(!b)return;const I=Ee(b[1]);if(!u())return s("@media missing '{'");const _=p().concat(h());return d()?E({type:"media",media:I,rules:_}):s("@media missing '}'")}function V(){const E=i(),b=m(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(b)return E({type:"custom-media",name:Ee(b[1]),media:Ee(b[2])})}function re(){const E=i();if(!m(/^@page */))return;const b=f()||[];if(!u())return s("@page missing '{'");let I=p(),_;for(;_=y();)I.push(_),I=I.concat(p());return d()?E({type:"page",selectors:b,declarations:I}):s("@page missing '}'")}function k(){const E=i(),b=m(/^@([-\w]+)?document *([^{]+)/);if(!b)return;const I=Ee(b[1]),_=Ee(b[2]);if(!u())return s("@document missing '{'");const j=p().concat(h());return d()?E({type:"document",document:_,vendor:I,rules:j}):s("@document missing '}'")}function Y(){const E=i();if(!m(/^@font-face\s*/))return;if(!u())return s("@font-face missing '{'");let b=p(),I;for(;I=y();)b.push(I),b=b.concat(p());return d()?E({type:"font-face",declarations:b}):s("@font-face missing '}'")}const P=R("import"),H=R("charset"),$=R("namespace");function R(E){const b=new RegExp("^@"+E+"\\s*([^;]+);");return()=>{const I=i(),_=m(b);if(!_)return;const j={type:E};return j[E]=_[1].trim(),I(j)}}function J(){if(t[0]==="@")return D()||z()||V()||A()||P()||H()||$()||k()||re()||C()||Y()}function ne(){const E=i(),b=f();return b?(p(),E({type:"rule",selectors:b,declarations:w()})):s("selector missing")}return Lt(c())}function Ee(t){return t?t.replace(/^\s+|\s+$/g,""):""}function Lt(t,e){const r=t&&typeof t.type=="string",n=r?t:e;for(const o of Object.keys(t)){const i=t[o];Array.isArray(i)?i.forEach(l=>{Lt(l,n)}):i&&typeof i=="object"&&Lt(i,n)}return r&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}const xr={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function Uo(t){let e=xr[t.tagName]?xr[t.tagName]:t.tagName;return e==="link"&&t.attributes._cssText&&(e="style"),e}function Ar(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Lr=/(max|min)-device-(width|height)/,Wo=new RegExp(Lr.source,"g"),_r=/([^\\]):hover/,jo=new RegExp(_r.source,"g");function Fr(t,e){const r=e?.stylesWithHoverClass.get(t);if(r)return r;const n=$o(t,{silent:!0});if(!n.stylesheet)return t;const o=[],i=[];function l(s){"selectors"in s&&s.selectors&&s.selectors.forEach(c=>{_r.test(c)&&o.push(c)}),"media"in s&&s.media&&Lr.test(s.media)&&i.push(s.media),"rules"in s&&s.rules&&s.rules.forEach(l)}l(n.stylesheet);let a=t;if(o.length>0){const s=new RegExp(o.filter((c,u)=>o.indexOf(c)===u).sort((c,u)=>u.length-c.length).map(c=>Ar(c)).join("|"),"g");a=a.replace(s,c=>{const u=c.replace(jo,"$1.\\:hover");return`${c}, ${u}`})}if(i.length>0){const s=new RegExp(i.filter((c,u)=>i.indexOf(c)===u).sort((c,u)=>u.length-c.length).map(c=>Ar(c)).join("|"),"g");a=a.replace(s,c=>c.replace(Wo,"$1-$2"))}return e?.stylesWithHoverClass.set(t,a),a}function Pr(){return{stylesWithHoverClass:new Map}}function Bo(t,e){var r;const{doc:n,hackCss:o,cache:i}=e;switch(t.type){case O.Document:return n.implementation.createDocument(null,"",null);case O.DocumentType:return n.implementation.createDocumentType(t.name||"html",t.publicId,t.systemId);case O.Element:{const l=Uo(t);let a;t.isSVG?a=n.createElementNS("http://www.w3.org/2000/svg",l):(t.isCustom&&((r=n.defaultView)===null||r===void 0?void 0:r.customElements)&&!n.defaultView.customElements.get(t.tagName)&&n.defaultView.customElements.define(t.tagName,class extends n.defaultView.HTMLElement{}),a=n.createElement(l));const s={};for(const c in t.attributes){if(!Object.prototype.hasOwnProperty.call(t.attributes,c))continue;let u=t.attributes[c];if(l==="option"&&c==="selected"&&u===!1||u===null)continue;if(u===!0&&(u=""),c.startsWith("rr_")){s[c]=u;continue}const d=l==="textarea"&&c==="value",h=l==="style"&&c==="_cssText";if(h&&o&&typeof u=="string"&&(u=Fr(u,i)),(d||h)&&typeof u=="string"){a.appendChild(n.createTextNode(u)),t.childNodes=[];continue}try{if(t.isSVG&&c==="xlink:href")a.setAttributeNS("http://www.w3.org/1999/xlink",c,u.toString());else if(c==="onload"||c==="onclick"||c.substring(0,7)==="onmouse")a.setAttribute("_"+c,u.toString());else if(l==="meta"&&t.attributes["http-equiv"]==="Content-Security-Policy"&&c==="content"){a.setAttribute("csp-content",u.toString());continue}else l==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||l==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")||(l==="img"&&t.attributes.srcset&&t.attributes.rr_dataURL?a.setAttribute("rrweb-original-srcset",t.attributes.srcset):a.setAttribute(c,u.toString()))}catch{}}for(const c in s){const u=s[c];if(l==="canvas"&&c==="rr_dataURL"){const d=document.createElement("img");d.onload=()=>{const h=a.getContext("2d");h&&h.drawImage(d,0,0,d.width,d.height)},d.src=u.toString(),a.RRNodeType&&(a.rr_dataURL=u.toString())}else if(l==="img"&&c==="rr_dataURL"){const d=a;d.currentSrc.startsWith("data:")||(d.setAttribute("rrweb-original-src",t.attributes.src),d.src=u.toString())}if(c==="rr_width")a.style.width=u.toString();else if(c==="rr_height")a.style.height=u.toString();else if(c==="rr_mediaCurrentTime"&&typeof u=="number")a.currentTime=u;else if(c==="rr_mediaState")switch(u){case"played":a.play().catch(d=>console.warn("media playback error",d));break;case"paused":a.pause();break}else c==="rr_mediaPlaybackRate"&&typeof u=="number"?a.playbackRate=u:c==="rr_mediaMuted"&&typeof u=="boolean"?a.muted=u:c==="rr_mediaLoop"&&typeof u=="boolean"?a.loop=u:c==="rr_mediaVolume"&&typeof u=="number"&&(a.volume=u)}if(t.isShadowHost)if(!a.shadowRoot)a.attachShadow({mode:"open"});else for(;a.shadowRoot.firstChild;)a.shadowRoot.removeChild(a.shadowRoot.firstChild);return a}case O.Text:return n.createTextNode(t.isStyle&&o?Fr(t.textContent,i):t.textContent);case O.CDATA:return n.createCDATASection(t.textContent);case O.Comment:return n.createComment(t.textContent);default:return null}}function Qe(t,e){const{doc:r,mirror:n,skipChild:o=!1,hackCss:i=!0,afterAppend:l,cache:a}=e;if(n.has(t.id)){const c=n.getNode(t.id),u=n.getMeta(c);if(go(u,t))return n.getNode(t.id)}let s=Bo(t,{doc:r,hackCss:i,cache:a});if(!s)return null;if(t.rootId&&n.getNode(t.rootId)!==r&&n.replace(t.rootId,r),t.type===O.Document&&(r.close(),r.open(),t.compatMode==="BackCompat"&&t.childNodes&&t.childNodes[0].type!==O.DocumentType&&(t.childNodes[0].type===O.Element&&"xmlns"in t.childNodes[0].attributes&&t.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):r.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),s=r),n.add(s,t),(t.type===O.Document||t.type===O.Element)&&!o)for(const c of t.childNodes){const u=Qe(c,{doc:r,mirror:n,skipChild:!1,hackCss:i,afterAppend:l,cache:a});if(!u){console.warn("Failed to rebuild",c);continue}if(c.isShadow&&wr(s)&&s.shadowRoot)s.shadowRoot.appendChild(u);else if(t.type===O.Document&&c.type==O.Element){const d=u;let h=null;d.childNodes.forEach(m=>{m.nodeName==="BODY"&&(h=m)}),h?(d.removeChild(h),s.appendChild(u),d.appendChild(h)):s.appendChild(u)}else s.appendChild(u);l&&l(u,c.id)}return s}function Vo(t,e){function r(n){e(n)}for(const n of t.getIds())t.has(n)&&r(t.getNode(n))}function zo(t,e){const r=e.getMeta(t);if(r?.type!==O.Element)return;const n=t;for(const o in r.attributes){if(!(Object.prototype.hasOwnProperty.call(r.attributes,o)&&o.startsWith("rr_")))continue;const i=r.attributes[o];o==="rr_scrollLeft"&&(n.scrollLeft=i),o==="rr_scrollTop"&&(n.scrollTop=i)}}function Ho(t,e){const{doc:r,onVisit:n,hackCss:o=!0,afterAppend:i,cache:l,mirror:a=new Ot}=e,s=Qe(t,{doc:r,mirror:a,skipChild:!1,hackCss:o,afterAppend:i,cache:l});return Vo(a,c=>{n&&n(c),zo(c,a)}),s}function ie(t,e,r=document){const n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}const _e=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;ee.mirror={map:{},getId(){return console.error(_e),-1},getNode(){return console.error(_e),null},removeNodeFromMap(){console.error(_e)},has(){return console.error(_e),!1},reset(){console.error(_e)}},typeof window<"u"&&window.Proxy&&window.Reflect&&(ee.mirror=new Proxy(ee.mirror,{get(t,e,r){return e==="map"&&console.error(_e),Reflect.get(t,e,r)}}));function Fe(t,e,r={}){let n=null,o=0;return function(...i){const l=Date.now();!o&&r.leading===!1&&(o=l);const a=e-(l-o),s=this;a<=0||a>e?(n&&(clearTimeout(n),n=null),o=l,t.apply(s,i)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,t.apply(s,i)},a))}}function Ke(t,e,r,n,o=window){const i=o.Object.getOwnPropertyDescriptor(t,e);return o.Object.defineProperty(t,e,n?r:{set(l){setTimeout(()=>{r.set.call(this,l)},0),i&&i.set&&i.set.call(this,l)}}),()=>Ke(t,e,i||{},!0)}function Me(t,e,r){try{if(!(e in t))return()=>{};const n=t[e],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=o,()=>{t[e]=n}}catch{return()=>{}}}let Ze=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Ze=()=>new Date().getTime());function _t(t){var e,r,n,o,i,l;const a=t.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:a?.documentElement.scrollLeft||((r=(e=a?.body)==null?void 0:e.parentElement)==null?void 0:r.scrollLeft)||((n=a?.body)==null?void 0:n.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:a?.documentElement.scrollTop||((i=(o=a?.body)==null?void 0:o.parentElement)==null?void 0:i.scrollTop)||((l=a?.body)==null?void 0:l.scrollTop)||0}}function Ft(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Pt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function $t(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function ae(t,e,r,n){if(!t)return!1;const o=$t(t);if(!o)return!1;try{if(typeof e=="string"){if(o.classList.contains(e)||n&&o.closest("."+e)!==null)return!0}else if(ht(o,e,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function $r(t,e){return e.getId(t)!==-1}function pt(t,e){return e.getId(t)===Je}function Ut(t,e){if(Xe(t))return!1;const r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?Ut(t.parentNode,e):!0:!0}function mt(t){return Boolean(t.changedTouches)}function Wt(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Ur(t){const e={},r=(o,i)=>{const l={value:o,parent:i,children:[]};return e[o.node.id]=l,l},n=[];for(const o of t){const{nextId:i,parentId:l}=o;if(i&&i in e){const a=e[i];if(a.parent){const s=a.parent.children.indexOf(a);a.parent.children.splice(s,0,r(o,a.parent))}else{const s=n.indexOf(a);n.splice(s,0,r(o,null))}continue}if(l in e){const a=e[l];a.children.push(r(o,a));continue}n.push(r(o,null))}return n}function jt(t,e){e(t.value);for(let r=t.children.length-1;r>=0;r--)jt(t.children[r],e)}function Pe(t,e){return Boolean(t.nodeName==="IFRAME"&&e.getMeta(t))}function Bt(t,e){return Boolean(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function Vt(t,e){var r,n;const o=(n=(r=t.ownerDocument)==null?void 0:r.defaultView)==null?void 0:n.frameElement;if(!o||o===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),l=Vt(o,e),a=i.height/o.clientHeight;return{x:i.x*l.relativeScale+l.x,y:i.y*l.relativeScale+l.y,relativeScale:a,absoluteScale:l.absoluteScale*a}}function Ce(t){return Boolean(t?.shadowRoot)}function $e(t,e){const r=t[e[0]];return e.length===1?r:$e(r.cssRules[e[1]].cssRules,e.slice(2))}function zt(t){const e=[...t],r=e.pop();return{positions:e,index:r}}function Wr(t){const e=new Set,r=[];for(let n=t.length;n--;){const o=t[n];e.has(o.id)||(r.push(o),e.add(o.id))}return r}class Ht{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var r;return(r=this.styleIDMap.get(e))!=null?r:-1}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Gt(t){var e,r;let n=null;return((r=(e=t.getRootNode)==null?void 0:e.call(t))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function jr(t){let e=t,r;for(;r=Gt(e);)e=r;return e}function Br(t){const e=t.ownerDocument;if(!e)return!1;const r=jr(t);return e.contains(r)}function Yt(t){const e=t.ownerDocument;return e?e.contains(t)||Br(t):!1}var Go=Object.freeze({__proto__:null,on:ie,get _mirror(){return ee.mirror},throttle:Fe,hookSetter:Ke,patch:Me,get nowTimestamp(){return Ze},getWindowScroll:_t,getWindowHeight:Ft,getWindowWidth:Pt,closestElementOfNode:$t,isBlocked:ae,isSerialized:$r,isIgnored:pt,isAncestorRemoved:Ut,legacy_isTouchEvent:mt,polyfill:Wt,queueToResolveTrees:Ur,iterateResolveTree:jt,isSerializedIframe:Pe,isSerializedStylesheet:Bt,getBaseDimension:Vt,hasShadowRoot:Ce,getNestedRule:$e,getPositionsAndIndex:zt,uniqueTextMutations:Wr,StyleSheetMirror:Ht,getShadowHost:Gt,getRootShadowHost:jr,shadowHostInDom:Br,inDom:Yt}),N=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(N||{}),M=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(M||{}),W=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(W||{}),ve=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(ve||{}),Se=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Se||{}),Te=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Te||{}),F=(t=>(t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back",t.Destroy="destroy",t))(F||{});function Vr(t){return"__ln"in t}class Yo{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=r?.next||null;return r}addNode(e){const r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&Vr(e.previousSibling)){const n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&Vr(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(e){const r=e.__ln;!this.head||(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const zr=(t,e)=>`${t}@${e}`;class Xo{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],r=new Set,n=new Yo,o=s=>{let c=s,u=Je;for(;u===Je;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},i=s=>{if(!s.parentNode||!Yt(s)||s.parentNode.tagName==="TEXTAREA")return;const c=Xe(s.parentNode)?this.mirror.getId(Gt(s)):this.mirror.getId(s.parentNode),u=o(s);if(c===-1||u===-1)return n.addNode(s);const d=Le(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{Pe(h,this.mirror)&&this.iframeManager.addIframe(h),Bt(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),Ce(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(h,m)=>{this.iframeManager.attachIframe(h,m),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,m)=>{this.stylesheetManager.attachLinkElement(h,m)}});d&&(e.push({parentId:c,nextId:u,node:d}),r.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of this.movedSet)Hr(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||i(s);for(const s of this.addedSet)!Yr(this.droppedSet,s)&&!Hr(this.removes,s,this.mirror)||Yr(this.movedSet,s)?i(s):this.droppedSet.add(s);let l=null;for(;n.length;){let s=null;if(l){const c=this.mirror.getId(l.value.parentNode),u=o(l.value);c!==-1&&u!==-1&&(s=l)}if(!s){let c=n.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(u.value.parentNode);if(o(u.value)===-1)continue;if(d!==-1){s=u;break}else{const h=u.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const m=h.parentNode.host;if(this.mirror.getId(m)!==-1){s=u;break}}}}}}if(!s){for(;n.head;)n.removeNode(n.head.value);break}l=s.previous,n.removeNode(s.value),i(s.value)}const a={texts:this.texts.map(s=>{const c=s.node;return c.parentNode&&c.parentNode.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(c.parentNode),{id:this.mirror.getId(c),value:s.value}}).filter(s=>!r.has(s.id)).filter(s=>this.mirror.has(s.id)),attributes:this.attributes.map(s=>{const{attributes:c}=s;if(typeof c.style=="string"){const u=JSON.stringify(s.styleDiff),d=JSON.stringify(s._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=s.styleDiff)}return{id:this.mirror.getId(s.node),attributes:c}}).filter(s=>!r.has(s.id)).filter(s=>this.mirror.has(s.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.genTextAreaValueMutation=e=>{let r=this.attributeMap.get(e);r||(r={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(e,r)),r.attributes.value=Array.from(e.childNodes,n=>n.textContent||"").join("")},this.processMutation=e=>{if(!pt(e.target,this.mirror))switch(e.type){case"characterData":{const r=e.target.textContent;!ae(e.target,this.blockClass,this.blockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Or(e.target,this.maskTextClass,this.maskTextSelector,!0)&&r?this.maskTextFn?this.maskTextFn(r,$t(e.target)):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let n=e.attributeName,o=e.target.getAttribute(n);if(n==="value"){const l=xt(r);o=Rt({element:r,maskInputOptions:this.maskInputOptions,tagName:r.tagName,type:l,value:o,maskInputFn:this.maskInputFn})}if(ae(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let i=this.attributeMap.get(e.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(o))if(!r.contentDocument)n="rr_src";else return;if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),n==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!Dr(r.tagName,n)&&(i.attributes[n]=kr(this.doc,we(r.tagName),we(n),o),n==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const l=this.unattachedDoc.createElement("span");e.oldValue&&l.setAttribute("style",e.oldValue);for(const a of Array.from(r.style)){const s=r.style.getPropertyValue(a),c=r.style.getPropertyPriority(a);s!==l.style.getPropertyValue(a)||c!==l.style.getPropertyPriority(a)?c===""?i.styleDiff[a]=s:i.styleDiff[a]=[s,c]:i._unchangedStyles[a]=[s,c]}for(const a of Array.from(l.style))r.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(ae(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const n=this.mirror.getId(r),o=Xe(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);ae(e.target,this.blockClass,this.blockSelector,!1)||pt(r,this.mirror)||!$r(r,this.mirror)||(this.addedSet.has(r)?(Xt(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&n===-1||Ut(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[zr(n,o)]?Xt(this.movedSet,r):this.removes.push({parentId:o,id:n,isShadow:Xe(e.target)&&qe(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(pt(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[zr(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);ae(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(n=>this.genAdds(n)),Ce(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Xt(t,e){t.delete(e),e.childNodes.forEach(r=>Xt(t,r))}function Hr(t,e,r){return t.length===0?!1:Gr(t,e,r)}function Gr(t,e,r){const{parentNode:n}=e;if(!n)return!1;const o=r.getId(n);return t.some(i=>i.id===o)?!0:Gr(t,n,r)}function Yr(t,e){return t.size===0?!1:Xr(t,e)}function Xr(t,e){const{parentNode:r}=e;return r?t.has(r)?!0:Xr(t,r):!1}let et;function qo(t){et=t}function Jo(){et=void 0}const U=t=>et?(...e)=>{try{return t(...e)}catch(r){if(et&&et(r)===!0)return;throw r}}:t;var Qo=Object.defineProperty,Ko=Object.defineProperties,Zo=Object.getOwnPropertyDescriptors,qr=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,Jr=(t,e,r)=>e in t?Qo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qr=(t,e)=>{for(var r in e||(e={}))es.call(e,r)&&Jr(t,r,e[r]);if(qr)for(var r of qr(e))ts.call(e,r)&&Jr(t,r,e[r]);return t},rs=(t,e)=>Ko(t,Zo(e));const Oe=[];function tt(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function Kr(t,e){var r,n;const o=new Xo;Oe.push(o),o.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const l=(n=(r=window?.Zone)==null?void 0:r.__symbol__)==null?void 0:n.call(r,"MutationObserver");l&&window[l]&&(i=window[l]);const a=new i(U(o.processMutations.bind(o)));return a.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function ns({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};const o=typeof e.mousemove=="number"?e.mousemove:50,i=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let l=[],a;const s=Fe(U(d=>{const h=Date.now()-a;t(l.map(m=>(m.timeOffset-=h,m)),d),l=[],a=null}),i),c=U(Fe(U(d=>{const h=tt(d),{clientX:m,clientY:g}=mt(d)?d.changedTouches[0]:d;a||(a=Ze()),l.push({x:m,y:g,id:n.getId(h),timeOffset:Ze()-a}),s(typeof DragEvent<"u"&&d instanceof DragEvent?M.Drag:d instanceof MouseEvent?M.MouseMove:M.TouchMove)}),o,{trailing:!1})),u=[ie("mousemove",c,r),ie("touchmove",c,r),ie("drag",c,r)];return U(()=>{u.forEach(d=>d())})}function os({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const l=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,a=[];let s=null;const c=u=>d=>{const h=tt(d);if(ae(h,n,o,!0))return;let m=null,g=u;if("pointerType"in d){switch(d.pointerType){case"mouse":m=ve.Mouse;break;case"touch":m=ve.Touch;break;case"pen":m=ve.Pen;break}m===ve.Touch?W[u]===W.MouseDown?g="TouchStart":W[u]===W.MouseUp&&(g="TouchEnd"):ve.Pen}else mt(d)&&(m=ve.Touch);m!==null?(s=m,(g.startsWith("Touch")&&m===ve.Touch||g.startsWith("Mouse")&&m===ve.Mouse)&&(m=null)):W[u]===W.Click&&(m=s,s=null);const p=mt(d)?d.changedTouches[0]:d;if(!p)return;const v=r.getId(h),{clientX:f,clientY:S}=p;U(t)(Qr({type:W[g],id:v,x:f,y:S},m!==null&&{pointerType:m}))};return Object.keys(W).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&l[u]!==!1).forEach(u=>{let d=we(u);const h=c(u);if(window.PointerEvent)switch(W[u]){case W.MouseDown:case W.MouseUp:d=d.replace("mouse","pointer");break;case W.TouchStart:case W.TouchEnd:return}a.push(ie(d,h,e))}),U(()=>{a.forEach(u=>u())})}function Zr({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,sampling:i}){const l=U(Fe(U(a=>{const s=tt(a);if(!s||ae(s,n,o,!0))return;const c=r.getId(s);if(s===e&&e.defaultView){const u=_t(e.defaultView);t({id:c,x:u.left,y:u.top})}else t({id:c,x:s.scrollLeft,y:s.scrollTop})}),i.scroll||100));return ie("scroll",l,e)}function ss({viewportResizeCb:t},{win:e}){let r=-1,n=-1;const o=U(Fe(U(()=>{const i=Ft(),l=Pt();(r!==i||n!==l)&&(t({width:Number(l),height:Number(i)}),r=i,n=l)}),200));return ie("resize",o,e)}const is=["INPUT","TEXTAREA","SELECT"],en=new WeakMap;function as({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:o,ignoreClass:i,ignoreSelector:l,maskInputOptions:a,maskInputFn:s,sampling:c,userTriggeredOnInput:u}){function d(f){let S=tt(f);const y=f.isTrusted,w=S&&S.tagName;if(S&&w==="OPTION"&&(S=S.parentElement),!S||!w||is.indexOf(w)<0||ae(S,n,o,!0)||S.classList.contains(i)||l&&S.matches(l))return;let T=S.value,D=!1;const A=xt(S)||"";A==="radio"||A==="checkbox"?D=S.checked:(a[w.toLowerCase()]||a[A])&&(T=Rt({element:S,maskInputOptions:a,tagName:w,type:A,value:T,maskInputFn:s})),h(S,u?{text:T,isChecked:D,userTriggered:y}:{text:T,isChecked:D});const C=S.name;A==="radio"&&C&&D&&e.querySelectorAll(`input[type="radio"][name="${C}"]`).forEach(z=>{if(z!==S){const V=z.value;h(z,u?{text:V,isChecked:!D,userTriggered:!1}:{text:V,isChecked:!D})}})}function h(f,S){const y=en.get(f);if(!y||y.text!==S.text||y.isChecked!==S.isChecked){en.set(f,S);const w=r.getId(f);U(t)(rs(Qr({},S),{id:w}))}}const m=(c.input==="last"?["change"]:["input","change"]).map(f=>ie(f,U(d),e)),g=e.defaultView;if(!g)return()=>{m.forEach(f=>f())};const p=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),v=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return p&&p.set&&m.push(...v.map(f=>Ke(f[0],f[1],{set(){U(d)({target:this,isTrusted:!1})}},!1,g))),U(()=>{m.forEach(f=>f())})}function ft(t){const e=[];function r(n,o){if(gt("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||gt("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||gt("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||gt("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const i=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(i)}else if(n.parentStyleSheet){const i=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(i)}return o}return r(t,e)}function Ne(t,e,r){let n,o;return t?(t.ownerNode?n=e.getId(t.ownerNode):o=r.getId(t),{styleId:o,id:n}):{}}function ls({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:U((u,d,h)=>{const[m,g]=h,{id:p,styleId:v}=Ne(d,e,r.styleMirror);return(p&&p!==-1||v&&v!==-1)&&t({id:p,styleId:v,adds:[{rule:m,index:g}]}),u.apply(d,h)})});const i=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:U((u,d,h)=>{const[m]=h,{id:g,styleId:p}=Ne(d,e,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&t({id:g,styleId:p,removes:[{index:m}]}),u.apply(d,h)})});let l;n.CSSStyleSheet.prototype.replace&&(l=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:U((u,d,h)=>{const[m]=h,{id:g,styleId:p}=Ne(d,e,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&t({id:g,styleId:p,replace:m}),u.apply(d,h)})}));let a;n.CSSStyleSheet.prototype.replaceSync&&(a=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:U((u,d,h)=>{const[m]=h,{id:g,styleId:p}=Ne(d,e,r.styleMirror);return(g&&g!==-1||p&&p!==-1)&&t({id:g,styleId:p,replaceSync:m}),u.apply(d,h)})}));const s={};yt("CSSGroupingRule")?s.CSSGroupingRule=n.CSSGroupingRule:(yt("CSSMediaRule")&&(s.CSSMediaRule=n.CSSMediaRule),yt("CSSConditionRule")&&(s.CSSConditionRule=n.CSSConditionRule),yt("CSSSupportsRule")&&(s.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(s).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:U((h,m,g)=>{const[p,v]=g,{id:f,styleId:S}=Ne(m.parentStyleSheet,e,r.styleMirror);return(f&&f!==-1||S&&S!==-1)&&t({id:f,styleId:S,adds:[{rule:p,index:[...ft(m),v||0]}]}),h.apply(m,g)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:U((h,m,g)=>{const[p]=g,{id:v,styleId:f}=Ne(m.parentStyleSheet,e,r.styleMirror);return(v&&v!==-1||f&&f!==-1)&&t({id:v,styleId:f,removes:[{index:[...ft(m),p]}]}),h.apply(m,g)})})}),U(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=i,l&&(n.CSSStyleSheet.prototype.replace=l),a&&(n.CSSStyleSheet.prototype.replaceSync=a),Object.entries(s).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function tn({mirror:t,stylesheetManager:e},r){var n,o,i;let l=null;r.nodeName==="#document"?l=t.getId(r):l=t.getId(r.host);const a=r.nodeName==="#document"?(n=r.defaultView)==null?void 0:n.Document:(i=(o=r.ownerDocument)==null?void 0:o.defaultView)==null?void 0:i.ShadowRoot,s=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a?.prototype,"adoptedStyleSheets"):void 0;return l===null||l===-1||!a||!s?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){var c;return(c=s.get)==null?void 0:c.call(this)},set(c){var u;const d=(u=s.set)==null?void 0:u.call(this,c);if(l!==null&&l!==-1)try{e.adoptStyleSheets(c,l)}catch{}return d}}),U(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function cs({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:U((a,s,c)=>{var u;const[d,h,m]=c;if(r.has(d))return i.apply(s,[d,h,m]);const{id:g,styleId:p}=Ne((u=s.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(g&&g!==-1||p&&p!==-1)&&t({id:g,styleId:p,set:{property:d,value:h,priority:m},index:ft(s.parentRule)}),a.apply(s,c)})});const l=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:U((a,s,c)=>{var u;const[d]=c;if(r.has(d))return l.apply(s,[d]);const{id:h,styleId:m}=Ne((u=s.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&t({id:h,styleId:m,remove:{property:d},index:ft(s.parentRule)}),a.apply(s,c)})}),U(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=l})}function us({mediaInteractionCb:t,blockClass:e,blockSelector:r,mirror:n,sampling:o,doc:i}){const l=U(s=>Fe(U(c=>{const u=tt(c);if(!u||ae(u,e,r,!0))return;const{currentTime:d,volume:h,muted:m,playbackRate:g,loop:p}=u;t({type:s,id:n.getId(u),currentTime:d,volume:h,muted:m,playbackRate:g,loop:p})}),o.media||500)),a=[ie("play",l(Te.Play),i),ie("pause",l(Te.Pause),i),ie("seeked",l(Te.Seeked),i),ie("volumechange",l(Te.VolumeChange),i),ie("ratechange",l(Te.RateChange),i)];return U(()=>{a.forEach(s=>s())})}function ds({fontCb:t,doc:e}){const r=e.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,i=r.FontFace;r.FontFace=function(a,s,c){const u=new i(a,s,c);return o.set(u,{family:a,buffer:typeof s!="string",descriptors:c,fontSource:typeof s=="string"?s:JSON.stringify(Array.from(new Uint8Array(s)))}),u};const l=Me(e.fonts,"add",function(a){return function(s){return setTimeout(U(()=>{const c=o.get(s);c&&(t(c),o.delete(s))}),0),a.apply(this,[s])}});return n.push(()=>{r.FontFace=i}),n.push(l),U(()=>{n.forEach(a=>a())})}function hs(t){const{doc:e,mirror:r,blockClass:n,blockSelector:o,selectionCb:i}=t;let l=!0;const a=U(()=>{const s=e.getSelection();if(!s||l&&s?.isCollapsed)return;l=s.isCollapsed||!1;const c=[],u=s.rangeCount||0;for(let d=0;d<u;d++){const h=s.getRangeAt(d),{startContainer:m,startOffset:g,endContainer:p,endOffset:v}=h;ae(m,n,o,!0)||ae(p,n,o,!0)||c.push({start:r.getId(m),startOffset:g,end:r.getId(p),endOffset:v})}i({ranges:c})});return a(),ie("selectionchange",a)}function ps({doc:t,customElementCb:e}){const r=t.defaultView;return!r||!r.customElements?()=>{}:Me(r.customElements,"define",function(n){return function(o,i,l){try{e({define:{name:o}})}catch{console.warn(`Custom element callback failed for ${o}`)}return n.apply(this,[o,i,l])}})}function ms(t,e){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:l,inputCb:a,mediaInteractionCb:s,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:m,customElementCb:g}=t;t.mutationCb=(...p)=>{e.mutation&&e.mutation(...p),r(...p)},t.mousemoveCb=(...p)=>{e.mousemove&&e.mousemove(...p),n(...p)},t.mouseInteractionCb=(...p)=>{e.mouseInteraction&&e.mouseInteraction(...p),o(...p)},t.scrollCb=(...p)=>{e.scroll&&e.scroll(...p),i(...p)},t.viewportResizeCb=(...p)=>{e.viewportResize&&e.viewportResize(...p),l(...p)},t.inputCb=(...p)=>{e.input&&e.input(...p),a(...p)},t.mediaInteractionCb=(...p)=>{e.mediaInteaction&&e.mediaInteaction(...p),s(...p)},t.styleSheetRuleCb=(...p)=>{e.styleSheetRule&&e.styleSheetRule(...p),c(...p)},t.styleDeclarationCb=(...p)=>{e.styleDeclaration&&e.styleDeclaration(...p),u(...p)},t.canvasMutationCb=(...p)=>{e.canvasMutation&&e.canvasMutation(...p),d(...p)},t.fontCb=(...p)=>{e.font&&e.font(...p),h(...p)},t.selectionCb=(...p)=>{e.selection&&e.selection(...p),m(...p)},t.customElementCb=(...p)=>{e.customElement&&e.customElement(...p),g(...p)}}function fs(t,e={}){const r=t.doc.defaultView;if(!r)return()=>{};ms(t,e);let n;t.recordDOM&&(n=Kr(t,t.doc));const o=ns(t),i=os(t),l=Zr(t),a=ss(t,{win:r}),s=as(t),c=us(t);let u=()=>{},d=()=>{},h=()=>{},m=()=>{};t.recordDOM&&(u=ls(t,{win:r}),d=tn(t,t.doc),h=cs(t,{win:r}),t.collectFonts&&(m=ds(t)));const g=hs(t),p=ps(t),v=[];for(const f of t.plugins)v.push(f.observer(f.callback,r,f.options));return U(()=>{Oe.forEach(f=>f.reset()),n?.disconnect(),o(),i(),l(),a(),s(),c(),u(),d(),h(),m(),g(),p(),v.forEach(f=>f())})}function gt(t){return typeof window[t]<"u"}function yt(t){return Boolean(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class rn{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,o){const i=n||this.getIdToRemoteIdMap(e),l=o||this.getRemoteIdToIdMap(e);let a=i.get(r);return a||(a=this.generateIdFn(),i.set(r,a),l.set(a,r)),a}getIds(e,r){const n=this.getIdToRemoteIdMap(e),o=this.getRemoteIdToIdMap(e);return r.map(i=>this.getId(e,i,n,o))}getRemoteId(e,r,n){const o=n||this.getRemoteIdToIdMap(e);return typeof r!="number"?r:o.get(r)||-1}getRemoteIds(e,r){const n=this.getRemoteIdToIdMap(e);return r.map(o=>this.getRemoteId(e,o,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}}class gs{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new rn(Nr),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new rn(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)==null||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const o=this.transformCrossOriginEvent(n,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}transformCrossOriginEvent(e,r){var n;switch(r.type){case N.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);const o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:N.IncrementalSnapshot,data:{source:M.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case N.Meta:case N.Load:case N.DomContentLoaded:return!1;case N.Plugin:return r;case N.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case N.IncrementalSnapshot:switch(r.data.source){case M.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(o.node,i)}),r.data.removes.forEach(o=>{this.replaceIds(o,e,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,e,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,e,["id"])}),r;case M.Drag:case M.TouchMove:case M.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,e,["id"])}),r;case M.ViewportResize:return!1;case M.MediaInteraction:case M.MouseInteraction:case M.Scroll:case M.CanvasMutation:case M.Input:return this.replaceIds(r.data,e,["id"]),r;case M.StyleSheetRule:case M.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case M.Font:return r;case M.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,e,["start","end"])}),r;case M.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),(n=r.data.styles)==null||n.forEach(o=>{this.replaceStyleIds(o,e,["styleId"])}),r}}return!1}replace(e,r,n,o){for(const i of o)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=e.getIds(n,r[i]):r[i]=e.getId(n,r[i]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==O.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}var ys=Object.defineProperty,vs=Object.defineProperties,Ss=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,ws=Object.prototype.propertyIsEnumerable,on=(t,e,r)=>e in t?ys(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sn=(t,e)=>{for(var r in e||(e={}))bs.call(e,r)&&on(t,r,e[r]);if(nn)for(var r of nn(e))ws.call(e,r)&&on(t,r,e[r]);return t},an=(t,e)=>vs(t,Ss(e));class Es{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!qe(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Kr(an(sn({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Zr(an(sn({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(tn({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,r){const n=this;this.restoreHandlers.push(Me(e.prototype,"attachShadow",function(o){return function(i){const l=o.call(this,i);return this.shadowRoot&&Yt(this)&&n.addShadowRoot(this.shadowRoot,r),l}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt=typeof Uint8Array>"u"?[]:new Uint8Array(256),vt=0;vt<Ue.length;vt++)rt[Ue.charCodeAt(vt)]=vt;var Ms=function(t){var e=new Uint8Array(t),r,n=e.length,o="";for(r=0;r<n;r+=3)o+=Ue[e[r]>>2],o+=Ue[(e[r]&3)<<4|e[r+1]>>4],o+=Ue[(e[r+1]&15)<<2|e[r+2]>>6],o+=Ue[e[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o},Cs=function(t){var e=t.length*.75,r=t.length,n,o=0,i,l,a,s;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=new ArrayBuffer(e),u=new Uint8Array(c);for(n=0;n<r;n+=4)i=rt[t.charCodeAt(n)],l=rt[t.charCodeAt(n+1)],a=rt[t.charCodeAt(n+2)],s=rt[t.charCodeAt(n+3)],u[o++]=i<<2|l>>4,u[o++]=(l&15)<<4|a>>2,u[o++]=(a&3)<<6|s&63;return c};const ln=new Map;function Ts(t,e){let r=ln.get(t);return r||(r=new Map,ln.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}const cn=(t,e,r)=>{if(!t||!(dn(t,e)||typeof t=="object"))return;const n=t.constructor.name,o=Ts(r,n);let i=o.indexOf(t);return i===-1&&(i=o.length,o.push(t)),i};function St(t,e,r){if(t instanceof Array)return t.map(n=>St(n,e,r));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const n=t.constructor.name,o=Ms(t);return{rr_type:n,base64:o}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[St(t.buffer,e,r),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const n=t.constructor.name,{src:o}=t;return{rr_type:n,src:o}}else if(t instanceof HTMLCanvasElement){const n="HTMLImageElement",o=t.toDataURL();return{rr_type:n,src:o}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[St(t.data,e,r),t.width,t.height]};if(dn(t,e)||typeof t=="object"){const n=t.constructor.name,o=cn(t,e,r);return{rr_type:n,index:o}}}}return t}const un=(t,e,r)=>t.map(n=>St(n,e,r)),dn=(t,e)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(n=>typeof e[n]=="function");return Boolean(r.find(n=>t instanceof e[n]))};function Ns(t,e,r,n){const o=[],i=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const l of i)try{if(typeof e.CanvasRenderingContext2D.prototype[l]!="function")continue;const a=Me(e.CanvasRenderingContext2D.prototype,l,function(s){return function(...c){return ae(this.canvas,r,n,!0)||setTimeout(()=>{const u=un(c,e,this);t(this.canvas,{type:Se["2D"],property:l,args:u})},0),s.apply(this,c)}});o.push(a)}catch{const s=Ke(e.CanvasRenderingContext2D.prototype,l,{set(c){t(this.canvas,{type:Se["2D"],property:l,args:[c],setter:!0})}});o.push(s)}return()=>{o.forEach(l=>l())}}function Is(t){return t==="experimental-webgl"?"webgl":t}function hn(t,e,r,n){const o=[];try{const i=Me(t.HTMLCanvasElement.prototype,"getContext",function(l){return function(a,...s){if(!ae(this,e,r,!0)){const c=Is(a);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(s[0]&&typeof s[0]=="object"){const u=s[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return l.apply(this,[a,...s])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function pn(t,e,r,n,o,i,l){const a=[],s=Object.getOwnPropertyNames(t);for(const c of s)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if(typeof t[c]!="function")continue;const u=Me(t,c,function(d){return function(...h){const m=d.apply(this,h);if(cn(m,l,this),"tagName"in this.canvas&&!ae(this.canvas,n,o,!0)){const g=un(h,l,this),p={type:e,property:c,args:g};r(this.canvas,p)}return m}});a.push(u)}catch{const d=Ke(t,c,{set(h){r(this.canvas,{type:e,property:c,args:[h],setter:!0})}});a.push(d)}return a}function ks(t,e,r,n,o){const i=[];return i.push(...pn(e.WebGLRenderingContext.prototype,Se.WebGL,t,r,n,o,e)),typeof e.WebGL2RenderingContext<"u"&&i.push(...pn(e.WebGL2RenderingContext.prototype,Se.WebGL2,t,r,n,o,e)),()=>{i.forEach(l=>l())}}function Ds(t,e){var r=e===void 0?null:e,n=t.toString(),o=n.split(`
`);o.pop(),o.shift();for(var i=o[0].search(/\S/),l=/(['"])__worker_loader_strict__(['"])/g,a=0,s=o.length;a<s;++a)o[a]=o[a].substring(i).replace(l,"$1use strict$2")+`
`;return r&&o.push("//# sourceMappingURL="+r+`
`),o}function Os(t,e){var r=Ds(t,e),n=new Blob(r,{type:"application/javascript"});return URL.createObjectURL(n)}function Rs(t,e){var r;return function(o){return r=r||Os(t,e),new Worker(r,o)}}var xs=Rs(function(){(function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=typeof Uint8Array>"u"?[]:new Uint8Array(256),r=0;r<t.length;r++)e[t.charCodeAt(r)]=r;var n=function(s){var c=new Uint8Array(s),u,d=c.length,h="";for(u=0;u<d;u+=3)h+=t[c[u]>>2],h+=t[(c[u]&3)<<4|c[u+1]>>4],h+=t[(c[u+1]&15)<<2|c[u+2]>>6],h+=t[c[u+2]&63];return d%3===2?h=h.substring(0,h.length-1)+"=":d%3===1&&(h=h.substring(0,h.length-2)+"=="),h};const o=new Map,i=new Map;async function l(s,c,u){const d=`${s}-${c}`;if("OffscreenCanvas"in globalThis){if(i.has(d))return i.get(d);const h=new OffscreenCanvas(s,c);h.getContext("2d");const m=await(await h.convertToBlob(u)).arrayBuffer(),g=n(m);return i.set(d,g),g}else return""}const a=self;a.onmessage=async function(s){if("OffscreenCanvas"in globalThis){const{id:c,bitmap:u,width:d,height:h,dataURLOptions:m}=s.data,g=l(d,h,m),p=new OffscreenCanvas(d,h);p.getContext("2d").drawImage(u,0,0),u.close();const v=await p.convertToBlob(m),f=v.type,S=await v.arrayBuffer(),y=n(S);if(!o.has(c)&&await g===y)return o.set(c,y),a.postMessage({id:c});if(o.get(c)===y)return a.postMessage({id:c});a.postMessage({id:c,type:f,base64:y,width:d,height:h}),o.set(c,y)}else return a.postMessage({id:s.data.id})}})()},null),mn=Object.getOwnPropertySymbols,As=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,_s=(t,e)=>{var r={};for(var n in t)As.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&mn)for(var n of mn(t))e.indexOf(n)<0&&Ls.call(t,n)&&(r[n]=t[n]);return r},Fs=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});class Ps{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(s,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(s)||this.pendingCanvasMutations.set(s,[]),this.pendingCanvasMutations.get(s).push(c)};const{sampling:r="all",win:n,blockClass:o,blockSelector:i,recordCanvas:l,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,l&&r==="all"&&this.initCanvasMutationObserver(n,o,i),l&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,i,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,r,n,o,i){const l=hn(r,n,o,!0),a=new Map,s=new xs;s.onmessage=g=>{const{id:p}=g.data;if(a.set(p,!1),!("base64"in g.data))return;const{base64:v,type:f,width:S,height:y}=g.data;this.mutationCb({id:p,type:Se["2D"],commands:[{property:"clearRect",args:[0,0,S,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:v}],type:f}]},0,0]}]})};const c=1e3/e;let u=0,d;const h=()=>{const g=[];return r.document.querySelectorAll("canvas").forEach(p=>{ae(p,n,o,!0)||g.push(p)}),g},m=g=>{if(u&&g-u<c){d=requestAnimationFrame(m);return}u=g,h().forEach(p=>Fs(this,null,function*(){var v;const f=this.mirror.getId(p);if(a.get(f)||p.width===0||p.height===0)return;if(a.set(f,!0),["webgl","webgl2"].includes(p.__context)){const y=p.getContext(p.__context);((v=y?.getContextAttributes())==null?void 0:v.preserveDrawingBuffer)===!1&&y.clear(y.COLOR_BUFFER_BIT)}const S=yield createImageBitmap(p);s.postMessage({id:f,bitmap:S,width:p.width,height:p.height,dataURLOptions:i.dataURLOptions},[S])})),d=requestAnimationFrame(m)};d=requestAnimationFrame(m),this.resetObservers=()=>{l(),cancelAnimationFrame(d)}}initCanvasMutationObserver(e,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=hn(e,r,n,!1),i=Ns(this.processMutation.bind(this),e,r,n),l=ks(this.processMutation.bind(this),e,r,n,this.mirror);this.resetObservers=()=>{o(),i(),l()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=r=>{this.rafStamps.latestId=r,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||r===-1)return;const o=n.map(l=>_s(l,["type"])),{type:i}=n[0];this.mutationCb({id:r,type:i,commands:o}),this.pendingCanvasMutations.delete(e)}}class $s{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ht,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;const n={id:r,styleIds:[]},o=[];for(const i of e){let l;this.styleMirror.has(i)?l=this.styleMirror.getId(i):(l=this.styleMirror.add(i),o.push({styleId:l,rules:Array.from(i.rules||CSSRule,(a,s)=>({rule:Er(a),index:s}))})),n.styleIds.push(l)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Us{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,r){const n=this.nodeMap.get(e);return n&&Array.from(n).some(o=>o!==r)}add(e,r){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}var Ws=Object.defineProperty,js=Object.defineProperties,Bs=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,Vs=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,gn=(t,e,r)=>e in t?Ws(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ce=(t,e)=>{for(var r in e||(e={}))Vs.call(e,r)&&gn(t,r,e[r]);if(fn)for(var r of fn(e))zs.call(e,r)&&gn(t,r,e[r]);return t},Hs=(t,e)=>js(t,Bs(e));function te(t){return Hs(ce({},t),{timestamp:Ze()})}let Q,bt,qt,wt=!1;const me=Mr();function Re(t={}){const{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:l="rr-ignore",ignoreSelector:a=null,maskTextClass:s="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:d,maskInputOptions:h,slimDOMOptions:m,maskInputFn:g,maskTextFn:p,hooks:v,packFn:f,sampling:S={},dataURLOptions:y={},mousemoveWait:w,recordDOM:T=!0,recordCanvas:D=!1,recordCrossOriginIframes:A=!1,recordAfter:C=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:z=!1,collectFonts:V=!1,inlineImages:re=!1,plugins:k,keepIframeSrcFn:Y=()=>!1,ignoreCSSAttributes:P=new Set([]),errorHandler:H}=t;qo(H);const $=A?window.parent===window:!0;let R=!1;if(!$)try{window.parent.document&&(R=!1)}catch{R=!0}if($&&!e)throw new Error("emit function is required");w!==void 0&&S.mousemove===void 0&&(S.mousemove=w),me.reset();const J=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:h!==void 0?h:{password:!0},ne=m===!0||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:m==="all",headMetaDescKeywords:m==="all"}:m||{};Wt();let E,b=0;const I=x=>{for(const de of k||[])de.eventProcessor&&(x=de.eventProcessor(x));return f&&!R&&(x=f(x)),x};Q=(x,de)=>{var Z;if(((Z=Oe[0])==null?void 0:Z.isFrozen())&&x.type!==N.FullSnapshot&&!(x.type===N.IncrementalSnapshot&&x.data.source===M.Mutation)&&Oe.forEach(oe=>oe.unfreeze()),$)e?.(I(x),de);else if(R){const oe={type:"rrweb",event:I(x),origin:window.location.origin,isCheckout:de};window.parent.postMessage(oe,"*")}if(x.type===N.FullSnapshot)E=x,b=0;else if(x.type===N.IncrementalSnapshot){if(x.data.source===M.Mutation&&x.data.isAttachIframe)return;b++;const oe=n&&b>=n,Ye=r&&x.timestamp-E.timestamp>r;(oe||Ye)&&bt(!0)}};const _=x=>{Q(te({type:N.IncrementalSnapshot,data:ce({source:M.Mutation},x)}))},j=x=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.Scroll},x)})),B=x=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.CanvasMutation},x)})),Ge=x=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.AdoptedStyleSheet},x)})),pe=new $s({mutationCb:_,adoptedStyleSheetCb:Ge}),ue=new gs({mirror:me,mutationCb:_,stylesheetManager:pe,recordCrossOriginIframes:A,wrappedEmit:Q});for(const x of k||[])x.getMirror&&x.getMirror({nodeMirror:me,crossOriginIframeMirror:ue.crossOriginIframeMirror,crossOriginIframeStyleMirror:ue.crossOriginIframeStyleMirror});const lt=new Us;qt=new Ps({recordCanvas:D,mutationCb:B,win:window,blockClass:o,blockSelector:i,mirror:me,sampling:S.canvas,dataURLOptions:y});const xe=new Es({mutationCb:_,scrollCb:j,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:J,dataURLOptions:y,maskTextFn:p,maskInputFn:g,recordCanvas:D,inlineImages:re,sampling:S,slimDOMOptions:ne,iframeManager:ue,stylesheetManager:pe,canvasManager:qt,keepIframeSrcFn:Y,processedNodeManager:lt},mirror:me});bt=(x=!1)=>{if(!T)return;Q(te({type:N.Meta,data:{href:window.location.href,width:Pt(),height:Ft()}}),x),pe.reset(),xe.init(),Oe.forEach(Z=>Z.lock());const de=Po(document,{mirror:me,blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:J,maskTextFn:p,slimDOM:ne,dataURLOptions:y,recordCanvas:D,inlineImages:re,onSerialize:Z=>{Pe(Z,me)&&ue.addIframe(Z),Bt(Z,me)&&pe.trackLinkElement(Z),Ce(Z)&&xe.addShadowRoot(Z.shadowRoot,document)},onIframeLoad:(Z,oe)=>{ue.attachIframe(Z,oe),xe.observeAttachShadow(Z)},onStylesheetLoad:(Z,oe)=>{pe.attachLinkElement(Z,oe)},keepIframeSrcFn:Y});if(!de)return console.warn("Failed to snapshot the document");Q(te({type:N.FullSnapshot,data:{node:de,initialOffset:_t(window)}}),x),Oe.forEach(Z=>Z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&pe.adoptStyleSheets(document.adoptedStyleSheets,me.getId(document))};try{const x=[],de=oe=>{var Ye;return U(fs)({mutationCb:_,mousemoveCb:(q,br)=>Q(te({type:N.IncrementalSnapshot,data:{source:br,positions:q}})),mouseInteractionCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.MouseInteraction},q)})),scrollCb:j,viewportResizeCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.ViewportResize},q)})),inputCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.Input},q)})),mediaInteractionCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.MediaInteraction},q)})),styleSheetRuleCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.StyleSheetRule},q)})),styleDeclarationCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.StyleDeclaration},q)})),canvasMutationCb:B,fontCb:q=>Q(te({type:N.IncrementalSnapshot,data:ce({source:M.Font},q)})),selectionCb:q=>{Q(te({type:N.IncrementalSnapshot,data:ce({source:M.Selection},q)}))},customElementCb:q=>{Q(te({type:N.IncrementalSnapshot,data:ce({source:M.CustomElement},q)}))},blockClass:o,ignoreClass:l,ignoreSelector:a,maskTextClass:s,maskTextSelector:c,maskInputOptions:J,inlineStylesheet:u,sampling:S,recordDOM:T,recordCanvas:D,inlineImages:re,userTriggeredOnInput:z,collectFonts:V,doc:oe,maskInputFn:g,maskTextFn:p,keepIframeSrcFn:Y,blockSelector:i,slimDOMOptions:ne,dataURLOptions:y,mirror:me,iframeManager:ue,stylesheetManager:pe,shadowDomManager:xe,processedNodeManager:lt,canvasManager:qt,ignoreCSSAttributes:P,plugins:((Ye=k?.filter(q=>q.observer))==null?void 0:Ye.map(q=>({observer:q.observer,options:q.options,callback:br=>Q(te({type:N.Plugin,data:{plugin:q.name,payload:br}}))})))||[]},v)};ue.addLoadListener(oe=>{try{x.push(de(oe.contentDocument))}catch(Ye){console.warn(Ye)}});const Z=()=>{bt(),x.push(de(document)),wt=!0};return document.readyState==="interactive"||document.readyState==="complete"?Z():(x.push(ie("DOMContentLoaded",()=>{Q(te({type:N.DomContentLoaded,data:{}})),C==="DOMContentLoaded"&&Z()})),x.push(ie("load",()=>{Q(te({type:N.Load,data:{}})),C==="load"&&Z()},window))),()=>{x.forEach(oe=>oe()),lt.destroy(),wt=!1,Jo()}}catch(x){console.warn(x)}}Re.addCustomEvent=(t,e)=>{if(!wt)throw new Error("please add custom event after start recording");Q(te({type:N.Custom,data:{tag:t,payload:e}}))},Re.freezePage=()=>{Oe.forEach(t=>t.freeze())},Re.takeFullSnapshot=t=>{if(!wt)throw new Error("please take full snapshot after start recording");bt(t)},Re.mirror=me;var L;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(L||(L={}));class Gs{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var r;if(!e)return-1;const n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ys(){return new Gs}function Xs(t){const e={},r=/;(?![^(]*\))/g,n=/:(.+)/,o=/\/\*.*?\*\//g;return t.replace(o,"").split(r).forEach(function(i){if(i){const l=i.split(n);l.length>1&&(e[Jt(l[0].trim())]=l[1].trim())}}),e}function yn(t){const e=[];for(const r in t){const n=t[r];if(typeof n!="string")continue;const o=Ks(r);e.push(`${o}: ${n};`)}return e.join(" ")}const qs=/-([a-z])/g,Js=/^--[a-zA-Z0-9-]+$/,Jt=t=>Js.test(t)?t:t.replace(qs,(e,r)=>r?r.toUpperCase():""),Qs=/\B([A-Z])/g,Ks=t=>t.replace(Qs,"-$1").toLowerCase();class he{constructor(...e){this.parentElement=null,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.ELEMENT_NODE=K.ELEMENT_NODE,this.TEXT_NODE=K.TEXT_NODE}get childNodes(){const e=[];let r=this.firstChild;for(;r;)e.push(r),r=r.nextSibling;return e}contains(e){if(e instanceof he){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,r){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function Zs(t){return class lo extends t{constructor(...r){super(r),this.nodeType=K.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=L.Document,this.textContent=null,this.ownerDocument=this}get documentElement(){return this.childNodes.find(r=>r.RRNodeType===L.Element&&r.tagName==="HTML")||null}get body(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===L.Element&&n.tagName==="BODY"))||null}get head(){var r;return((r=this.documentElement)===null||r===void 0?void 0:r.childNodes.find(n=>n.RRNodeType===L.Element&&n.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(r){const n=r.RRNodeType;if((n===L.Element||n===L.DocumentType)&&this.childNodes.some(i=>i.RRNodeType===n))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${n===L.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const o=Qt(this,r);return o.parentElement=null,o}insertBefore(r,n){const o=r.RRNodeType;if((o===L.Element||o===L.DocumentType)&&this.childNodes.some(l=>l.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===L.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const i=Mn(this,r,n);return i.parentElement=null,i}removeChild(r){return Cn(this,r)}open(){this.firstChild=null,this.lastChild=null}close(){}write(r){let n;if(r==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?n="-//W3C//DTD XHTML 1.0 Transitional//EN":r==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(n="-//W3C//DTD HTML 4.0 Transitional//EN"),n){const o=this.createDocumentType("html",n,"");this.open(),this.appendChild(o)}}createDocument(r,n,o){return new lo}createDocumentType(r,n,o){const i=new(vn(he))(r,n,o);return i.ownerDocument=this,i}createElement(r){const n=new(Sn(he))(r);return n.ownerDocument=this,n}createElementNS(r,n){return this.createElement(n)}createTextNode(r){const n=new(bn(he))(r);return n.ownerDocument=this,n}createComment(r){const n=new(wn(he))(r);return n.ownerDocument=this,n}createCDATASection(r){const n=new(En(he))(r);return n.ownerDocument=this,n}toString(){return"RRDocument"}}}function vn(t){return class extends t{constructor(e,r,n){super(),this.nodeType=K.DOCUMENT_TYPE_NODE,this.RRNodeType=L.DocumentType,this.name=e,this.publicId=r,this.systemId=n,this.nodeName=e,this.textContent=null}toString(){return"RRDocumentType"}}}function Sn(t){return class extends t{constructor(e){super(),this.nodeType=K.ELEMENT_NODE,this.RRNodeType=L.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(r=>e+=r.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new ti(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?Xs(this.attributes.style):{},r=/\B([A-Z])/g;return e.setProperty=(n,o,i)=>{if(r.test(n))return;const l=Jt(n);o?e[l]=o:delete e[l],i==="important"&&(e[l]+=" !important"),this.attributes.style=yn(e)},e.removeProperty=n=>{if(r.test(n))return"";const o=Jt(n),i=e[o]||"";return delete e[o],this.attributes.style=yn(e),i},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,r){this.attributes[e]=r}setAttributeNS(e,r,n){this.setAttribute(r,n)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return Qt(this,e)}insertBefore(e,r){return Mn(this,e,r)}removeChild(e){return Cn(this,e)}attachShadow(e){const r=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=r,r}dispatchEvent(e){return!0}toString(){let e="";for(const r in this.attributes)e+=`${r}="${this.attributes[r]}" `;return`${this.tagName} ${e}`}}}function ei(t){return class extends t{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}function bn(t){return class extends t{constructor(e){super(),this.nodeType=K.TEXT_NODE,this.nodeName="#text",this.RRNodeType=L.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function wn(t){return class extends t{constructor(e){super(),this.nodeType=K.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=L.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function En(t){return class extends t{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=K.CDATA_SECTION_NODE,this.RRNodeType=L.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class ti{constructor(e,r){if(this.classes=[],this.add=(...n)=>{for(const o of n){const i=String(o);this.classes.indexOf(i)>=0||this.classes.push(i)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...n)=>{this.classes=this.classes.filter(o=>n.indexOf(o)===-1),this.onChange&&this.onChange(this.classes.join(" "))},e){const n=e.trim().split(/\s+/);this.classes.push(...n)}this.onChange=r}}function Qt(t,e){return e.parentNode&&e.parentNode.removeChild(e),t.lastChild?(t.lastChild.nextSibling=e,e.previousSibling=t.lastChild):(t.firstChild=e,e.previousSibling=null),t.lastChild=e,e.nextSibling=null,e.parentNode=t,e.parentElement=t,e.ownerDocument=t.ownerDocument,e}function Mn(t,e,r){if(!r)return Qt(t,e);if(r.parentNode!==t)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===r||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=r.previousSibling,r.previousSibling=e,e.nextSibling=r,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,e.parentElement=t,e.parentNode=t,e.ownerDocument=t.ownerDocument),e}function Cn(t,e){if(e.parentNode!==t)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:t.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:t.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}var K;(function(t){t[t.PLACEHOLDER=0]="PLACEHOLDER",t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",t[t.ENTITY_NODE=6]="ENTITY_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(K||(K={}));const Kt={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},ri={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let ge=null;function Et(t,e,r,n=e.mirror||e.ownerDocument.mirror){t=ni(t,e,r,n),Tn(t,e,r,n),oi(t,e,r)}function ni(t,e,r,n){var o;if(r.afterAppend&&!ge&&(ge=new WeakSet,setTimeout(()=>{ge=null},0)),!Zt(t,e)){const i=Mt(e,r.mirror,n);(o=t.parentNode)===null||o===void 0||o.replaceChild(i,t),t=i}switch(e.RRNodeType){case L.Document:{if(!We(t,e,r.mirror,n)){const i=n.getMeta(e);i&&(r.mirror.removeNodeFromMap(t),t.close(),t.open(),r.mirror.add(t,i),ge?.add(t))}break}case L.Element:{const i=t,l=e;switch(l.tagName){case"IFRAME":{const a=t.contentDocument;if(!a)break;Et(a,e.contentDocument,r,n);break}}l.shadowRoot&&(i.shadowRoot||i.attachShadow({mode:"open"}),Tn(i.shadowRoot,l.shadowRoot,r,n)),si(i,l,n);break}}return t}function oi(t,e,r){var n;switch(e.RRNodeType){case L.Document:{const o=e.scrollData;o&&r.applyScroll(o,!0);break}case L.Element:{const o=t,i=e;switch(i.scrollData&&r.applyScroll(i.scrollData,!0),i.inputData&&r.applyInput(i.inputData),i.tagName){case"AUDIO":case"VIDEO":{const l=t,a=i;a.paused!==void 0&&(a.paused?l.pause():l.play()),a.muted!==void 0&&(l.muted=a.muted),a.volume!==void 0&&(l.volume=a.volume),a.currentTime!==void 0&&(l.currentTime=a.currentTime),a.playbackRate!==void 0&&(l.playbackRate=a.playbackRate),a.loop!==void 0&&(l.loop=a.loop);break}case"CANVAS":{const l=e;if(l.rr_dataURL!==null){const a=document.createElement("img");a.onload=()=>{const s=o.getContext("2d");s&&s.drawImage(a,0,0,a.width,a.height)},a.src=l.rr_dataURL}l.canvasMutations.forEach(a=>r.applyCanvas(a.event,a.mutation,t));break}case"STYLE":{const l=o.sheet;l&&e.rules.forEach(a=>r.applyStyleSheetMutation(a,l));break}}break}case L.Text:case L.Comment:case L.CDATA:{t.textContent!==e.data&&(t.textContent=e.data);break}}ge!=null&&ge.has(t)&&(ge.delete(t),(n=r.afterAppend)===null||n===void 0||n.call(r,t,r.mirror.getId(t)))}function si(t,e,r){const n=t.attributes,o=e.attributes;for(const i in o){const l=o[i],a=r.getMeta(e);if(a?.isSVG&&Kt[i])t.setAttributeNS(Kt[i],i,l);else if(e.tagName==="CANVAS"&&i==="rr_dataURL"){const s=document.createElement("img");s.src=l,s.onload=()=>{const c=t.getContext("2d");c&&c.drawImage(s,0,0,s.width,s.height)}}else{if(e.tagName==="IFRAME"&&i==="srcdoc")continue;t.setAttribute(i,l)}}for(const{name:i}of Array.from(n))i in o||t.removeAttribute(i);e.scrollLeft&&(t.scrollLeft=e.scrollLeft),e.scrollTop&&(t.scrollTop=e.scrollTop)}function Tn(t,e,r,n){const o=Array.from(t.childNodes),i=e.childNodes;if(o.length===0&&i.length===0)return;let l=0,a=o.length-1,s=0,c=i.length-1,u=o[l],d=o[a],h=i[s],m=i[c],g,p;for(;l<=a&&s<=c;)if(u===void 0)u=o[++l];else if(d===void 0)d=o[--a];else if(We(u,h,r.mirror,n))u=o[++l],h=i[++s];else if(We(d,m,r.mirror,n))d=o[--a],m=i[--c];else if(We(u,m,r.mirror,n)){try{t.insertBefore(u,d.nextSibling)}catch(S){console.warn(S)}u=o[++l],m=i[--c]}else if(We(d,h,r.mirror,n)){try{t.insertBefore(d,u)}catch(S){console.warn(S)}d=o[--a],h=i[++s]}else{if(!g){g={};for(let y=l;y<=a;y++){const w=o[y];w&&r.mirror.hasNode(w)&&(g[r.mirror.getId(w)]=y)}}p=g[n.getId(h)];const S=o[p];if(p!==void 0&&S&&We(S,h,r.mirror,n)){try{t.insertBefore(S,u)}catch(y){console.warn(y)}o[p]=void 0}else{const y=Mt(h,r.mirror,n);t.nodeName==="#document"&&u&&(y.nodeType===y.DOCUMENT_TYPE_NODE&&u.nodeType===u.DOCUMENT_TYPE_NODE||y.nodeType===y.ELEMENT_NODE&&u.nodeType===u.ELEMENT_NODE)&&(t.removeChild(u),r.mirror.removeNodeFromMap(u),u=o[++l]);try{t.insertBefore(y,u||null)}catch(w){console.warn(w)}}h=i[++s]}if(l>a){const S=i[c+1];let y=null;for(S&&(y=r.mirror.getNode(n.getId(S)));s<=c;++s){const w=Mt(i[s],r.mirror,n);try{t.insertBefore(w,y)}catch(T){console.warn(T)}}}else if(s>c)for(;l<=a;l++){const S=o[l];if(!(!S||S.parentNode!==t))try{t.removeChild(S),r.mirror.removeNodeFromMap(S)}catch(y){console.warn(y)}}let v=t.firstChild,f=e.firstChild;for(;v!==null&&f!==null;)Et(v,f,r,n),v=v.nextSibling,f=f.nextSibling}function Mt(t,e,r){const n=r.getId(t),o=r.getMeta(t);let i=null;if(n>-1&&(i=e.getNode(n)),i!==null&&Zt(i,t))return i;switch(t.RRNodeType){case L.Document:i=new Document;break;case L.DocumentType:i=document.implementation.createDocumentType(t.name,t.publicId,t.systemId);break;case L.Element:{let l=t.tagName.toLowerCase();l=ri[l]||l,o&&"isSVG"in o&&o?.isSVG?i=document.createElementNS(Kt.svg,l):i=document.createElement(t.tagName);break}case L.Text:i=document.createTextNode(t.data);break;case L.Comment:i=document.createComment(t.data);break;case L.CDATA:i=document.createCDATASection(t.data);break}o&&e.add(i,Object.assign({},o));try{ge?.add(i)}catch{}return i}function Zt(t,e){return t.nodeType!==e.nodeType?!1:t.nodeType!==t.ELEMENT_NODE||t.tagName.toUpperCase()===e.tagName}function We(t,e,r,n){const o=r.getId(t),i=n.getId(e);return o===-1||o!==i?!1:Zt(t,e)}class je extends Zs(he){get unserializedId(){return this._unserializedId--}constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=gi(),this.scrollData=null,e&&(this.mirror=e)}createDocument(e,r,n){return new je}createDocumentType(e,r,n){const o=new ii(e,r,n);return o.ownerDocument=this,o}createElement(e){const r=e.toUpperCase();let n;switch(r){case"AUDIO":case"VIDEO":n=new ai(r);break;case"IFRAME":n=new ui(r,this.mirror);break;case"CANVAS":n=new li(r);break;case"STYLE":n=new ci(r);break;default:n=new nt(r);break}return n.ownerDocument=this,n}createComment(e){const r=new hi(e);return r.ownerDocument=this,r}createCDATASection(e){const r=new pi(e);return r.ownerDocument=this,r}createTextNode(e){const r=new di(e);return r.ownerDocument=this,r}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const ii=vn(he);class nt extends Sn(he){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class ai extends ei(nt){}class li extends nt{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class ci extends nt{constructor(){super(...arguments),this.rules=[]}}class ui extends nt{constructor(e,r){super(e),this.contentDocument=new je,this.contentDocument.mirror=r}}const di=bn(he),hi=wn(he),pi=En(he);function mi(t){return t instanceof HTMLFormElement?"FORM":t.tagName.toUpperCase()}function Nn(t,e,r,n){let o;switch(t.nodeType){case K.DOCUMENT_NODE:n&&n.nodeName==="IFRAME"?o=n.contentDocument:(o=e,o.compatMode=t.compatMode);break;case K.DOCUMENT_TYPE_NODE:{const l=t;o=e.createDocumentType(l.name,l.publicId,l.systemId);break}case K.ELEMENT_NODE:{const l=t,a=mi(l);o=e.createElement(a);const s=o;for(const{name:c,value:u}of Array.from(l.attributes))s.attributes[c]=u;l.scrollLeft&&(s.scrollLeft=l.scrollLeft),l.scrollTop&&(s.scrollTop=l.scrollTop);break}case K.TEXT_NODE:o=e.createTextNode(t.textContent||"");break;case K.CDATA_SECTION_NODE:o=e.createCDATASection(t.data);break;case K.COMMENT_NODE:o=e.createComment(t.textContent||"");break;case K.DOCUMENT_FRAGMENT_NODE:o=n.attachShadow({mode:"open"});break;default:return null}let i=r.getMeta(t);return e instanceof je&&(i||(i=In(o,e.unserializedId),r.add(t,i)),e.mirror.add(o,Object.assign({},i))),o}function fi(t,e=Ys(),r=new je){function n(o,i){const l=Nn(o,r,e,i);if(l!==null)if(i?.nodeName!=="IFRAME"&&o.nodeType!==K.DOCUMENT_FRAGMENT_NODE&&(i?.appendChild(l),l.parentNode=i,l.parentElement=i),o.nodeName==="IFRAME"){const a=o.contentDocument;a&&n(a,l)}else(o.nodeType===K.DOCUMENT_NODE||o.nodeType===K.ELEMENT_NODE||o.nodeType===K.DOCUMENT_FRAGMENT_NODE)&&(o.nodeType===K.ELEMENT_NODE&&o.shadowRoot&&n(o.shadowRoot,l),o.childNodes.forEach(a=>n(a,l)))}return n(t,null),r}function gi(){return new yi}class yi{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var r;if(!e)return-1;const n=(r=this.getMeta(e))===null||r===void 0?void 0:r.id;return n??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function In(t,e){switch(t.RRNodeType){case L.Document:return{id:e,type:t.RRNodeType,childNodes:[]};case L.DocumentType:{const r=t;return{id:e,type:t.RRNodeType,name:r.name,publicId:r.publicId,systemId:r.systemId}}case L.Element:return{id:e,type:t.RRNodeType,tagName:t.tagName.toLowerCase(),attributes:{},childNodes:[]};case L.Text:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case L.Comment:return{id:e,type:t.RRNodeType,textContent:t.textContent||""};case L.CDATA:return{id:e,type:t.RRNodeType,textContent:""}}}function kn(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(o){o(r)}),(n=t.get("*"))&&n.slice().map(function(o){o(e,r)})}}}var vi=Object.freeze({__proto__:null,default:kn});function Si(t=window,e=document){if("scrollBehavior"in e.documentElement.style&&t.__forceSmoothScrollPolyfill__!==!0)return;const r=t.HTMLElement||t.Element,n=468,o={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||s,scrollIntoView:r.prototype.scrollIntoView},i=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;function l(f){const S=["MSIE ","Trident/","Edge/"];return new RegExp(S.join("|")).test(f)}const a=l(t.navigator.userAgent)?1:0;function s(f,S){this.scrollLeft=f,this.scrollTop=S}function c(f){return .5*(1-Math.cos(Math.PI*f))}function u(f){if(f===null||typeof f!="object"||f.behavior===void 0||f.behavior==="auto"||f.behavior==="instant")return!0;if(typeof f=="object"&&f.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+f.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(f,S){if(S==="Y")return f.clientHeight+a<f.scrollHeight;if(S==="X")return f.clientWidth+a<f.scrollWidth}function h(f,S){const y=t.getComputedStyle(f,null)["overflow"+S];return y==="auto"||y==="scroll"}function m(f){const S=d(f,"Y")&&h(f,"Y"),y=d(f,"X")&&h(f,"X");return S||y}function g(f){for(;f!==e.body&&m(f)===!1;)f=f.parentNode||f.host;return f}function p(f){const S=i();let y,w,T,D=(S-f.startTime)/n;D=D>1?1:D,y=c(D),w=f.startX+(f.x-f.startX)*y,T=f.startY+(f.y-f.startY)*y,f.method.call(f.scrollable,w,T),(w!==f.x||T!==f.y)&&t.requestAnimationFrame(p.bind(t,f))}function v(f,S,y){let w,T,D,A;const C=i();f===e.body?(w=t,T=t.scrollX||t.pageXOffset,D=t.scrollY||t.pageYOffset,A=o.scroll):(w=f,T=f.scrollLeft,D=f.scrollTop,A=s),p({scrollable:w,method:A,startTime:C,startX:T,startY:D,x:S,y})}t.scroll=t.scrollTo=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.scroll.call(t,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:t.scrollX||t.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:t.scrollY||t.pageYOffset);return}v.call(t,e.body,arguments[0].left!==void 0?~~arguments[0].left:t.scrollX||t.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:t.scrollY||t.pageYOffset)}},t.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])){o.scrollBy.call(t,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}v.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(u(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}const f=arguments[0].left,S=arguments[0].top;v.call(this,this,typeof f>"u"?this.scrollLeft:~~f,typeof S>"u"?this.scrollTop:~~S)},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(u(arguments[0])===!0){o.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(u(arguments[0])===!0){o.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}const f=g(this),S=f.getBoundingClientRect(),y=this.getBoundingClientRect();f!==e.body?(v.call(this,f,f.scrollLeft+y.left-S.left,f.scrollTop+y.top-S.top),t.getComputedStyle(f).position!=="fixed"&&t.scrollBy({left:S.left,top:S.top,behavior:"smooth"})):t.scrollBy({left:y.left,top:y.top,behavior:"smooth"})}}class bi{constructor(e=[],r){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=r.speed}addAction(e){const r=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const n=this.findActionIndex(e);this.actions.splice(n,0,e)}r&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const r=this.actions[0];if(this.timeOffset>=r.delay)this.actions.shift(),r.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let r=0,n=this.actions.length-1;for(;r<=n;){const o=Math.floor((r+n)/2);if(this.actions[o].delay<e.delay)r=o+1;else if(this.actions[o].delay>e.delay)n=o-1;else return o+1}return r}}function Dn(t,e){if(t.type===N.IncrementalSnapshot&&t.data.source===M.MouseMove&&t.data.positions&&t.data.positions.length){const r=t.data.positions[0].timeOffset,n=t.timestamp+r;return t.delay=n-e,n-e}return t.delay=t.timestamp-e,t.delay}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function On(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),l=[];try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)l.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return l}var Be;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Be||(Be={}));var Rn={type:"xstate.init"};function er(t){return t===void 0?[]:[].concat(t)}function Ve(t){return{type:"xstate.assign",assignment:t}}function xn(t,e){return typeof(t=typeof t=="string"&&e&&e[t]?e[t]:t)=="string"?{type:t}:typeof t=="function"?{type:t.name,exec:t}:t}function Ct(t){return function(e){return t===e}}function An(t){return typeof t=="string"?{type:t}:t}function Ln(t,e){return{value:t,context:e,actions:[],changed:!1,matches:Ct(t)}}function _n(t,e,r){var n=e,o=!1;return[t.filter(function(i){if(i.type==="xstate.assign"){o=!0;var l=Object.assign({},n);return typeof i.assignment=="function"?l=i.assignment(n,r):Object.keys(i.assignment).forEach(function(a){l[a]=typeof i.assignment[a]=="function"?i.assignment[a](n,r):i.assignment[a]}),n=l,!1}return!0}),n,o]}function Fn(t,e){e===void 0&&(e={});var r=On(_n(er(t.states[t.initial].entry).map(function(l){return xn(l,e.actions)}),t.context,Rn),2),n=r[0],o=r[1],i={config:t,_options:e,initialState:{value:t.initial,actions:n,context:o,matches:Ct(t.initial)},transition:function(l,a){var s,c,u=typeof l=="string"?{value:l,context:t.context}:l,d=u.value,h=u.context,m=An(a),g=t.states[d];if(g.on){var p=er(g.on[m.type]);try{for(var v=function(R){var J=typeof Symbol=="function"&&Symbol.iterator,ne=J&&R[J],E=0;if(ne)return ne.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&E>=R.length&&(R=void 0),{value:R&&R[E++],done:!R}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),f=v.next();!f.done;f=v.next()){var S=f.value;if(S===void 0)return Ln(d,h);var y=typeof S=="string"?{target:S}:S,w=y.target,T=y.actions,D=T===void 0?[]:T,A=y.cond,C=A===void 0?function(){return!0}:A,z=w===void 0,V=w??d,re=t.states[V];if(C(h,m)){var k=On(_n((z?er(D):[].concat(g.exit,D,re.entry).filter(function(R){return R})).map(function(R){return xn(R,i._options.actions)}),h,m),3),Y=k[0],P=k[1],H=k[2],$=w??d;return{value:$,context:P,actions:Y,changed:w!==d||Y.length>0||H,matches:Ct($)}}}}catch(R){s={error:R}}finally{try{f&&!f.done&&(c=v.return)&&c.call(v)}finally{if(s)throw s.error}}}return Ln(d,h)}};return i}var Pn=function(t,e){return t.actions.forEach(function(r){var n=r.exec;return n&&n(t.context,e)})};function $n(t){var e=t.initialState,r=Be.NotStarted,n=new Set,o={_machine:t,send:function(i){r===Be.Running&&(e=t.transition(e,i),Pn(e,An(i)),n.forEach(function(l){return l(e)}))},subscribe:function(i){return n.add(i),i(e),{unsubscribe:function(){return n.delete(i)}}},start:function(i){if(i){var l=typeof i=="object"?i:{context:t.config.context,value:i};e={value:l.value,actions:[],context:l.context,matches:Ct(l.value)}}return r=Be.Running,Pn(e,Rn),o},stop:function(){return r=Be.Stopped,n.clear(),o},get state(){return e},get status(){return r}};return o}var wi=Object.defineProperty,Ei=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Un=Object.getOwnPropertySymbols,Ci=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable,Wn=(t,e,r)=>e in t?wi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tr=(t,e)=>{for(var r in e||(e={}))Ci.call(e,r)&&Wn(t,r,e[r]);if(Un)for(var r of Un(e))Ti.call(e,r)&&Wn(t,r,e[r]);return t},rr=(t,e)=>Ei(t,Mi(e));function Ni(t,e){for(let r=t.length-1;r>=0;r--){const n=t[r];if(n.type===N.Meta&&n.timestamp<=e)return t.slice(r)}return t}function Ii(t,{getCastFn:e,applyEventsSynchronously:r,emitter:n}){const o=Fn({id:"player",context:t,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Ve({lastPlayedEvent:(i,l)=>l.type==="CAST_EVENT"?l.payload.event:i.lastPlayedEvent}),recordTimeOffset:Ve((i,l)=>{let a=i.timeOffset;return"payload"in l&&"timeOffset"in l.payload&&(a=l.payload.timeOffset),rr(tr({},i),{timeOffset:a,baselineTime:i.events[0].timestamp+a})}),play(i){var l;const{timer:a,events:s,baselineTime:c,lastPlayedEvent:u}=i;a.clear();for(const g of s)Dn(g,c);const d=Ni(s,c);let h=u?.timestamp;u?.type===N.IncrementalSnapshot&&u.data.source===M.MouseMove&&(h=u.timestamp+((l=u.data.positions[0])==null?void 0:l.timeOffset)),c<(h||0)&&n.emit(F.PlayBack);const m=new Array;for(const g of d)if(!(h&&h<c&&(g.timestamp<=h||g===u)))if(g.timestamp<c)m.push(g);else{const p=e(g,!1);a.addAction({doAction:()=>{p()},delay:g.delay})}r(m),n.emit(F.Flush),a.start()},pause(i){i.timer.clear()},resetLastPlayedEvent:Ve(i=>rr(tr({},i),{lastPlayedEvent:null})),startLive:Ve({baselineTime:(i,l)=>(i.timer.start(),l.type==="TO_LIVE"&&l.payload.baselineTime?l.payload.baselineTime:Date.now())}),addEvent:Ve((i,l)=>{const{baselineTime:a,timer:s,events:c}=i;if(l.type==="ADD_EVENT"){const{event:u}=l.payload;Dn(u,a);let d=c.length-1;if(!c[d]||c[d].timestamp<=u.timestamp)c.push(u);else{let g=-1,p=0;for(;p<=d;){const v=Math.floor((p+d)/2);c[v].timestamp<=u.timestamp?p=v+1:d=v-1}g===-1&&(g=p),c.splice(g,0,u)}const h=u.timestamp<a,m=e(u,h);h?m():s.isActive()&&s.addAction({doAction:()=>{m()},delay:u.delay})}return rr(tr({},i),{events:c})})}});return $n(o)}function ki(t){const e=Fn({id:"speed",context:t,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(r,n)=>{"payload"in n&&r.timer.setSpeed(n.payload.speed)},recordSpeed:Ve({normalSpeed:r=>r.timer.speed}),restoreSpeed:r=>{r.timer.setSpeed(r.normalSpeed)}}});return $n(e)}const Di=t=>[`.${t} { background: currentColor }`,"noscript { display: none !important; }"];var Oi=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});const jn=new Map;function Bn(t,e){let r=jn.get(t);return r||(r=new Map,jn.set(t,r)),r.has(e)||r.set(e,[]),r.get(e)}function Ie(t,e,r){return n=>Oi(this,null,function*(){if(n&&typeof n=="object"&&"rr_type"in n)if(r&&(r.isUnchanged=!1),n.rr_type==="ImageBitmap"&&"args"in n){const o=yield Ie(t,e,r)(n.args);return yield createImageBitmap.apply(null,o)}else if("index"in n){if(r||e===null)return n;const{rr_type:o,index:i}=n;return Bn(e,o)[i]}else if("args"in n){const{rr_type:o,args:i}=n,l=window[o];return new l(...yield Promise.all(i.map(Ie(t,e,r))))}else{if("base64"in n)return Cs(n.base64);if("src"in n){const o=t.get(n.src);if(o)return o;{const i=new Image;return i.src=n.src,t.set(n.src,i),i}}else if("data"in n&&n.rr_type==="Blob"){const o=yield Promise.all(n.data.map(Ie(t,e,r)));return new Blob(o,{type:n.type})}}else if(Array.isArray(n))return yield Promise.all(n.map(Ie(t,e,r)));return n})}var Ri=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});function xi(t,e){try{return e===Se.WebGL?t.getContext("webgl")||t.getContext("experimental-webgl"):t.getContext("webgl2")}catch{return null}}const Ai=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Li(t,e){if(!(e!=null&&e.constructor))return;const{name:r}=e.constructor;if(!Ai.includes(r))return;const n=Bn(t,r);n.includes(e)||n.push(e)}function _i(t){return Ri(this,arguments,function*({mutation:e,target:r,type:n,imageMap:o,errorHandler:i}){try{const l=xi(r,n);if(!l)return;if(e.setter){l[e.property]=e.args[0];return}const a=l[e.property],s=yield Promise.all(e.args.map(Ie(o,l))),c=a.apply(l,s);Li(l,c)}catch(l){i(e,l)}})}var Vn=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});function Fi(t){return Vn(this,arguments,function*({event:e,mutations:r,target:n,imageMap:o,errorHandler:i}){const l=n.getContext("2d");if(!l){i(r[0],new Error("Canvas context is null"));return}const a=r.map(s=>Vn(this,null,function*(){return Promise.all(s.args.map(Ie(o,l)))}));(yield Promise.all(a)).forEach((s,c)=>{const u=r[c];try{if(u.setter){l[u.property]=u.args[0];return}const d=l[u.property];u.property==="drawImage"&&typeof u.args[0]=="string"?(o.get(e),d.apply(l,u.args)):d.apply(l,s)}catch(d){i(u,d)}})})}var Pi=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});function nr(t){return Pi(this,arguments,function*({event:e,mutation:r,target:n,imageMap:o,canvasEventMap:i,errorHandler:l}){try{const a=i.get(e)||r,s="commands"in a?a.commands:[a];if([Se.WebGL,Se.WebGL2].includes(r.type)){for(let c=0;c<s.length;c++){const u=s[c];yield _i({mutation:u,type:r.type,target:n,imageMap:o,errorHandler:l})}return}yield Fi({event:e,mutations:s,target:n,imageMap:o,errorHandler:l})}catch(a){l(r,a)}})}class $i{constructor(e){this.mediaMap=new Map,this.metadataCallbackMap=new Map,this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(F.Start,this.start.bind(this)),this.emitter.on(F.SkipStart,this.start.bind(this)),this.emitter.on(F.Pause,this.pause.bind(this)),this.emitter.on(F.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((r,n)=>{this.syncTargetWithState(n),e.pause&&n.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:r,mediaState:n}){if(n.isPlaying){const o=(e-n.lastInteractionTimeOffset)/1e3*n.playbackRate,i="duration"in r&&r.duration;if(Number.isNaN(i)){this.waitForMetadata(r);return}let l=n.currentTimeAtLastInteraction+o;r.loop&&i!==!1&&(l=l%i),r.currentTime=l}else r.pause(),r.currentTime=n.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e)||!("addEventListener"in e))return;const r=()=>{this.metadataCallbackMap.delete(e);const n=this.mediaMap.get(e);!n||this.seekTo({time:this.getCurrentTime(),target:e,mediaState:n})};this.metadataCallbackMap.set(e,r),e.addEventListener("loadedmetadata",r,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:r,mutation:n}){var o,i,l,a,s;const c=this.mediaMap.get(e),{type:u,playbackRate:d,currentTime:h,muted:m,volume:g,loop:p}=n;return{isPlaying:u===Te.Play||u!==Te.Pause&&(c?.isPlaying||e.getAttribute("autoplay")!==null),currentTimeAtLastInteraction:(o=h??c?.currentTimeAtLastInteraction)!=null?o:0,lastInteractionTimeOffset:r,playbackRate:(i=d??c?.playbackRate)!=null?i:1,volume:(l=g??c?.volume)!=null?l:1,muted:(a=m??c?.muted)!=null?a:e.getAttribute("muted")===null,loop:(s=p??c?.loop)!=null?s:e.getAttribute("loop")===null}}syncTargetWithState(e){const r=this.mediaMap.get(e);if(!r)return;const{muted:n,loop:o,volume:i,isPlaying:l}=r,a=this.service.state.matches("paused"),s=r.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:r}),e.volume!==i&&(e.volume=i),e.muted=n,e.loop=o,e.playbackRate!==s&&(e.playbackRate=s),l&&!a?e.play():e.pause()}catch(c){this.warn(`Failed to replay media interactions: ${c.message||c}`)}}addMediaElements(e,r,n){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;const o=e,i=n.getMeta(o);if(!i||!("attributes"in i))return;const l=this.service.state.matches("paused"),a=i.attributes;let s=!1;a.rr_mediaState?s=a.rr_mediaState==="played":s=o.getAttribute("autoplay")!==null,s&&l&&o.pause();let c=1;typeof a.rr_mediaPlaybackRate=="number"&&(c=a.rr_mediaPlaybackRate);let u=!1;typeof a.rr_mediaMuted=="boolean"?u=a.rr_mediaMuted:u=o.getAttribute("muted")!==null;let d=!1;typeof a.rr_mediaLoop=="boolean"?d=a.rr_mediaLoop:d=o.getAttribute("loop")!==null;let h=1;typeof a.rr_mediaVolume=="number"&&(h=a.rr_mediaVolume);let m=0;typeof a.rr_mediaCurrentTime=="number"&&(m=a.rr_mediaCurrentTime),this.mediaMap.set(o,{isPlaying:s,currentTimeAtLastInteraction:m,lastInteractionTimeOffset:r,playbackRate:c,volume:h,muted:u,loop:d}),this.syncTargetWithState(o)}mediaMutation({target:e,timeOffset:r,mutation:n}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:r,mutation:n})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}}var Ui=Object.defineProperty,Wi=Object.defineProperties,ji=Object.getOwnPropertyDescriptors,zn=Object.getOwnPropertySymbols,Bi=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,Hn=(t,e,r)=>e in t?Ui(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tt=(t,e)=>{for(var r in e||(e={}))Bi.call(e,r)&&Hn(t,r,e[r]);if(zn)for(var r of zn(e))Vi.call(e,r)&&Hn(t,r,e[r]);return t},or=(t,e)=>Wi(t,ji(e)),sr=(t,e,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(t,e)).next())});const zi=5*1e3,Hi=kn||vi,Gn="[replayer]",ir={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Yn(t){return t.type==N.IncrementalSnapshot&&(t.data.source==M.TouchMove||t.data.source==M.MouseInteraction&&t.data.type==W.TouchStart)}class Gi{constructor(e,r){if(this.usingVirtualDom=!1,this.virtualDom=new je,this.mouseTail=null,this.tailPositions=[],this.emitter=Hi(),this.legacy_missingNodeRetryMap={},this.cache=Pr(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Mr(),this.styleMirror=new Ht,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastMouseDownEvent=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=a=>{this.iframe.style.display="inherit";for(const s of[this.mouseTail,this.iframe])!s||(s.setAttribute("width",String(a.width)),s.setAttribute("height",String(a.height)))},this.applyEventsSynchronously=a=>{for(const s of a){switch(s.type){case N.DomContentLoaded:case N.Load:case N.Custom:continue;case N.FullSnapshot:case N.Meta:case N.Plugin:case N.IncrementalSnapshot:break}this.getCastFn(s,!0)()}},this.getCastFn=(a,s=!1)=>{let c;switch(a.type){case N.DomContentLoaded:case N.Load:break;case N.Custom:c=()=>{this.emitter.emit(F.CustomEvent,a)};break;case N.Meta:c=()=>this.emitter.emit(F.Resize,{width:a.data.width,height:a.data.height});break;case N.FullSnapshot:c=()=>{var u;if(this.firstFullSnapshot){if(this.firstFullSnapshot===a){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(a,s),(u=this.iframe.contentWindow)==null||u.scrollTo(a.data.initialOffset)};break;case N.IncrementalSnapshot:c=()=>{if(this.applyIncremental(a,s),!s&&(a===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const u of this.service.state.context.events)if(!(u.timestamp<=a.timestamp)&&this.isUserInteraction(u)){u.delay-a.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=u);break}if(this.nextUserInteractionEvent){const u=this.nextUserInteractionEvent.delay-a.delay,d={speed:Math.min(Math.round(u/zi),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(F.SkipStart,d)}}};break}return()=>{c&&c();for(const d of this.config.plugins||[])d.handler&&d.handler(a,s,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:a}});const u=this.service.state.context.events.length-1;if(!this.config.liveMode&&a===this.service.state.context.events[u]){const d=()=>{u<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(F.Finish))};let h=50;a.type===N.IncrementalSnapshot&&a.data.source===M.MouseMove&&a.data.positions.length&&(h+=Math.max(0,-a.data.positions[0].timeOffset)),setTimeout(d,h)}this.emitter.emit(F.EventCast,a)}},!(r!=null&&r.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:10*1e3,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:ir,useVirtualDom:!0,logger:console};this.config=Object.assign({},n,r),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(F.Resize,this.handleResize),this.setupDom();for(const a of this.config.plugins||[])a.getMirror&&a.getMirror({nodeMirror:this.mirror});this.emitter.on(F.Flush,()=>{if(this.usingVirtualDom){const a={mirror:this.mirror,applyCanvas:(s,c,u)=>{nr({event:s,mutation:c,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(s,c)=>{s.source===M.StyleSheetRule?this.applyStyleSheetRule(s,c):s.source===M.StyleDeclaration&&this.applyStyleDeclaration(s,c)},afterAppend:(s,c)=>{for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(s,{id:c,replayer:this})}};if(this.iframe.contentDocument)try{Et(this.iframe.contentDocument,this.virtualDom,a,this.virtualDom.mirror)}catch(s){console.warn(s)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const s in this.legacy_missingNodeRetryMap)try{const c=this.legacy_missingNodeRetryMap[s],u=Mt(c.node,this.mirror,this.virtualDom.mirror);Et(u,c.node,a,this.virtualDom.mirror),c.node=u}catch(c){this.warn(c)}this.constructedStyleMutations.forEach(s=>{this.applyStyleSheetMutation(s)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(s=>{this.applyAdoptedStyleSheet(s)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[a,s]=this.lastMouseDownEvent;a.dispatchEvent(s)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(F.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});const o=new bi([],{speed:this.config.speed});this.service=Ii({events:e.map(a=>r&&r.unpackFn?r.unpackFn(a):a).sort((a,s)=>a.timestamp-s.timestamp),timer:o,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(a=>{this.emitter.emit(F.StateChange,{player:a})}),this.speedService=ki({normalSpeed:-1,timer:o}),this.speedService.start(),this.speedService.subscribe(a=>{this.emitter.emit(F.StateChange,{speed:a})}),this.mediaManager=new $i({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});const i=this.service.state.context.events.find(a=>a.type===N.Meta),l=this.service.state.context.events.find(a=>a.type===N.FullSnapshot);if(i){const{width:a,height:s}=i.data;setTimeout(()=>{this.emitter.emit(F.Resize,{width:a,height:s})},0)}l&&setTimeout(()=>{var a;this.firstFullSnapshot||(this.firstFullSnapshot=l,this.rebuildFullSnapshot(l),(a=this.iframe.contentWindow)==null||a.scrollTo(l.data.initialOffset))},1),this.service.state.context.events.find(Yn)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,r){return this.emitter.on(e,r),this}off(e,r){return this.emitter.off(e,r),this}setConfig(e){Object.keys(e).forEach(r=>{e[r],this.config[r]=e[r]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],r=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:r.timestamp,totalTime:r.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:r}=this.service.state.context;return e-r[0].timestamp}getMirror(){return this.mirror}play(e=0){var r,n;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.remove("rrweb-paused"),this.emitter.emit(F.Start)}pause(e){var r,n;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(n=(r=this.iframe.contentDocument)==null?void 0:r.getElementsByTagName("html")[0])==null||n.classList.add("rrweb-paused"),this.emitter.emit(F.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(F.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(F.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const r=this.config.unpackFn?this.config.unpackFn(e):e;Yn(r)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:r}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Pr()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Si(this.iframe.contentWindow,this.iframe.contentDocument),Wt(this.iframe.contentWindow))}rebuildFullSnapshot(e,r=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],o=(a,s)=>{if(this.collectIframeAndAttachDocument(n,a),this.mediaManager.isSupportedMediaElement(a)){const{events:c}=this.service.state.context;this.mediaManager.addMediaElements(a,e.timestamp-c[0].timestamp,this.mirror)}for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(a,{id:s,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),Ho(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:a,builtNode:s}of n)this.attachDocumentToIframe(a,s),this.newDocumentQueue=this.newDocumentQueue.filter(c=>c!==a);const{documentElement:i,head:l}=this.iframe.contentDocument;this.insertStyleRules(i,l),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(F.FullsnapshotRebuilded,e),r||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,r){var n;const o=Di(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const i=this.virtualDom.createElement("style");this.virtualDom.mirror.add(i,In(i,this.virtualDom.unserializedId)),e.insertBefore(i,r),i.rules.push({source:M.StyleSheetRule,adds:o.map((l,a)=>({rule:l,index:a}))})}else{const i=document.createElement("style");e.insertBefore(i,r);for(let l=0;l<o.length;l++)(n=i.sheet)==null||n.insertRule(o[l],l)}}attachDocumentToIframe(e,r){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,o=[],i=(l,a)=>{this.collectIframeAndAttachDocument(o,l);const s=n.getMeta(l);if(s?.type===O.Element&&s?.tagName.toUpperCase()==="HTML"){const{documentElement:c,head:u}=r.contentDocument;this.insertStyleRules(c,u)}if(!this.usingVirtualDom)for(const c of this.config.plugins||[])c.onBuild&&c.onBuild(l,{id:a,replayer:this})};Qe(e.node,{doc:r.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:i,cache:this.cache}),i(r.contentDocument,e.node.id);for(const{mutationInQueue:l,builtNode:a}of o)this.attachDocumentToIframe(l,a),this.newDocumentQueue=this.newDocumentQueue.filter(s=>s!==l)}collectIframeAndAttachDocument(e,r){if(Pe(r,this.mirror)){const n=this.newDocumentQueue.find(o=>o.parentId===this.mirror.getId(r));n&&e.push({mutationInQueue:n,builtNode:r})}}waitForStylesheetLoad(){var e;const r=(e=this.iframe.contentDocument)==null?void 0:e.head;if(r){const n=new Set;let o,i=this.service.state;const l=()=>{i=this.service.state};this.emitter.on(F.Start,l),this.emitter.on(F.Pause,l);const a=()=>{this.emitter.off(F.Start,l),this.emitter.off(F.Pause,l)};r.querySelectorAll('link[rel="stylesheet"]').forEach(s=>{s.sheet||(n.add(s),s.addEventListener("load",()=>{n.delete(s),n.size===0&&o!==-1&&(i.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(F.LoadStylesheetEnd),o&&clearTimeout(o),a())}))}),n.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(F.LoadStylesheetStart),o=setTimeout(()=>{i.matches("playing")&&this.play(this.getCurrentTime()),o=-1,a()},this.config.loadTimeout))}}preloadAllImages(){return sr(this,null,function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(F.Start,e),this.emitter.on(F.Pause,e);const r=[];for(const n of this.service.state.context.events)n.type===N.IncrementalSnapshot&&n.data.source===M.CanvasMutation&&(r.push(this.deserializeAndPreloadCanvasEvents(n.data,n)),("commands"in n.data?n.data.commands:[n.data]).forEach(o=>{this.preloadImages(o,n)}));return Promise.all(r)})}preloadImages(e,r){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(r)){const n=document.createElement("canvas"),o=n.getContext("2d"),i=o?.createImageData(n.width,n.height);i?.data,JSON.parse(e.args[0]),o?.putImageData(i,0,0)}}deserializeAndPreloadCanvasEvents(e,r){return sr(this,null,function*(){if(!this.canvasEventMap.has(r)){const n={isUnchanged:!0};if("commands"in e){const o=yield Promise.all(e.commands.map(i=>sr(this,null,function*(){const l=yield Promise.all(i.args.map(Ie(this.imageMap,null,n)));return or(Tt({},i),{args:l})})));n.isUnchanged===!1&&this.canvasEventMap.set(r,or(Tt({},e),{commands:o}))}else{const o=yield Promise.all(e.args.map(Ie(this.imageMap,null,n)));n.isUnchanged===!1&&this.canvasEventMap.set(r,or(Tt({},e),{args:o}))}}})}applyIncremental(e,r){var n,o,i;const{data:l}=e;switch(l.source){case M.Mutation:{try{this.applyMutation(l,r)}catch(a){this.warn(`Exception in mutation ${a.message||a}`,l)}break}case M.Drag:case M.TouchMove:case M.MouseMove:if(r){const a=l.positions[l.positions.length-1];this.mousePos={x:a.x,y:a.y,id:a.id,debugData:l}}else l.positions.forEach(a=>{const s={doAction:()=>{this.moveAndHover(a.x,a.y,a.id,r,l)},delay:a.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(s)}),this.timer.addAction({doAction(){},delay:e.delay-((n=l.positions[0])==null?void 0:n.timeOffset)});break;case M.MouseInteraction:{if(l.id===-1)break;const a=new Event(we(W[l.type])),s=this.mirror.getNode(l.id);if(!s)return this.debugNodeNotFound(l,l.id);this.emitter.emit(F.MouseInteraction,{type:l.type,target:s});const{triggerFocus:c}=this.config;switch(l.type){case W.Blur:"blur"in s&&s.blur();break;case W.Focus:c&&s.focus&&s.focus({preventScroll:!0});break;case W.Click:case W.TouchStart:case W.TouchEnd:case W.MouseDown:case W.MouseUp:r?(l.type===W.TouchStart?this.touchActive=!0:l.type===W.TouchEnd&&(this.touchActive=!1),l.type===W.MouseDown?this.lastMouseDownEvent=[s,a]:l.type===W.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:l.x||0,y:l.y||0,id:l.id,debugData:l}):(l.type===W.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(l.x||0,l.y||0,l.id,r,l),l.type===W.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):l.type===W.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):l.type===W.TouchEnd?this.mouse.classList.remove("touch-active"):s.dispatchEvent(a));break;case W.TouchCancel:r?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:s.dispatchEvent(a)}break}case M.Scroll:{if(l.id===-1)break;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(l.id);if(!a)return this.debugNodeNotFound(l,l.id);a.scrollData=l;break}this.applyScroll(l,r);break}case M.ViewportResize:this.emitter.emit(F.Resize,{width:l.width,height:l.height});break;case M.Input:{if(l.id===-1)break;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(l.id);if(!a)return this.debugNodeNotFound(l,l.id);a.inputData=l;break}this.applyInput(l);break}case M.MediaInteraction:{const a=this.usingVirtualDom?this.virtualDom.mirror.getNode(l.id):this.mirror.getNode(l.id);if(!a)return this.debugNodeNotFound(l,l.id);const s=a,{events:c}=this.service.state.context;this.mediaManager.mediaMutation({target:s,timeOffset:e.timestamp-c[0].timestamp,mutation:l});break}case M.StyleSheetRule:case M.StyleDeclaration:{this.usingVirtualDom?l.styleId?this.constructedStyleMutations.push(l):l.id&&((o=this.virtualDom.mirror.getNode(l.id))==null||o.rules.push(l)):this.applyStyleSheetMutation(l);break}case M.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const a=this.virtualDom.mirror.getNode(l.id);if(!a)return this.debugNodeNotFound(l,l.id);a.canvasMutations.push({event:e,mutation:l})}else{const a=this.mirror.getNode(l.id);if(!a)return this.debugNodeNotFound(l,l.id);nr({event:e,mutation:l,target:a,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case M.Font:{try{const a=new FontFace(l.family,l.buffer?new Uint8Array(JSON.parse(l.fontSource)):l.fontSource,l.descriptors);(i=this.iframe.contentDocument)==null||i.fonts.add(a)}catch(a){this.warn(a)}break}case M.Selection:{if(r){this.lastSelectionData=l;break}this.applySelection(l);break}case M.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(l):this.applyAdoptedStyleSheet(l);break}}}applyMutation(e,r){if(this.config.useVirtualDom&&!this.usingVirtualDom&&r&&(this.usingVirtualDom=!0,fi(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const c in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[c],d=Nn(u.node,this.virtualDom,this.mirror);d&&(u.node=d)}catch(u){this.warn(u)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(c=>n.getNode(c.id)?!0:(this.warnNodeNotFound(e,c.id),!1)),e.removes.forEach(c=>{var u;const d=n.getNode(c.id);if(!d)return;let h=n.getNode(c.parentId);if(!h)return this.warnNodeNotFound(e,c.parentId);if(c.isShadow&&Ce(h)&&(h=h.shadowRoot),n.removeNodeFromMap(d),h)try{h.removeChild(d),this.usingVirtualDom&&d.nodeName==="#text"&&h.nodeName==="STYLE"&&((u=h.rules)==null?void 0:u.length)>0&&(h.rules=[])}catch(m){if(m instanceof DOMException)this.warn("parent could not remove child in mutation",h,d,e);else throw m}});const o=Tt({},this.legacy_missingNodeRetryMap),i=[],l=c=>{let u=null;return c.nextId&&(u=n.getNode(c.nextId)),c.nextId!==null&&c.nextId!==void 0&&c.nextId!==-1&&!u},a=c=>{var u,d;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let h=n.getNode(c.parentId);if(!h)return c.node.type===O.Document?this.newDocumentQueue.push(c):i.push(c);c.node.isShadow&&(Ce(h)||h.attachShadow({mode:"open"}),h=h.shadowRoot);let m=null,g=null;if(c.previousId&&(m=n.getNode(c.previousId)),c.nextId&&(g=n.getNode(c.nextId)),l(c))return i.push(c);if(c.node.rootId&&!n.getNode(c.node.rootId))return;const p=c.node.rootId?n.getNode(c.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Pe(h,n)){this.attachDocumentToIframe(c,h);return}const v=(y,w)=>{if(!this.usingVirtualDom)for(const T of this.config.plugins||[])T.onBuild&&T.onBuild(y,{id:w,replayer:this})},f=Qe(c.node,{doc:p,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:v});if(c.previousId===-1||c.nextId===-1){o[c.node.id]={node:f,mutation:c};return}const S=n.getMeta(h);if(S&&S.type===O.Element&&S.tagName==="textarea"&&c.node.type===O.Text){const y=Array.isArray(h.childNodes)?h.childNodes:Array.from(h.childNodes);for(const w of y)w.nodeType===h.TEXT_NODE&&h.removeChild(w)}else if(S?.type===O.Document){const y=h;c.node.type===O.DocumentType&&((u=y.childNodes[0])==null?void 0:u.nodeType)===Node.DOCUMENT_TYPE_NODE&&y.removeChild(y.childNodes[0]),f.nodeName==="HTML"&&y.documentElement&&y.removeChild(y.documentElement)}if(m&&m.nextSibling&&m.nextSibling.parentNode?h.insertBefore(f,m.nextSibling):g&&g.parentNode?h.contains(g)?h.insertBefore(f,g):h.insertBefore(f,null):h.appendChild(f),v(f,c.node.id),this.usingVirtualDom&&f.nodeName==="#text"&&h.nodeName==="STYLE"&&((d=h.rules)==null?void 0:d.length)>0&&(h.rules=[]),Pe(f,this.mirror)){const y=this.mirror.getId(f),w=this.newDocumentQueue.find(T=>T.parentId===y);w&&(this.attachDocumentToIframe(w,f),this.newDocumentQueue=this.newDocumentQueue.filter(T=>T!==w))}(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(o,h,f,c)};e.adds.forEach(c=>{a(c)});const s=Date.now();for(;i.length;){const c=Ur(i);if(i.length=0,Date.now()-s>500){this.warn("Timeout in the loop, please check the resolve tree data:",c);break}for(const u of c)n.getNode(u.value.parentId)?jt(u,d=>{a(d)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(o).length&&Object.assign(this.legacy_missingNodeRetryMap,o),Wr(e.texts).forEach(c=>{var u;const d=n.getNode(c.id);if(!d)return e.removes.find(h=>h.id===c.id)?void 0:this.warnNodeNotFound(e,c.id);if(d.textContent=c.value,this.usingVirtualDom){const h=d.parentNode;((u=h?.rules)==null?void 0:u.length)>0&&(h.rules=[])}}),e.attributes.forEach(c=>{var u;const d=n.getNode(c.id);if(!d)return e.removes.find(h=>h.id===c.id)?void 0:this.warnNodeNotFound(e,c.id);for(const h in c.attributes)if(typeof h=="string"){const m=c.attributes[h];if(m===null)d.removeAttribute(h);else if(typeof m=="string")try{if(h==="_cssText"&&(d.nodeName==="LINK"||d.nodeName==="STYLE"))try{const g=n.getMeta(d);Object.assign(g.attributes,c.attributes);const p=Qe(g,{doc:d.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),v=d.nextSibling,f=d.parentNode;if(p&&f){f.removeChild(d),f.insertBefore(p,v),n.replace(c.id,p);break}}catch{}if(h==="value"&&d.nodeName==="TEXTAREA"){const g=d;g.childNodes.forEach(v=>g.removeChild(v));const p=(u=d.ownerDocument)==null?void 0:u.createTextNode(m);p&&g.appendChild(p)}else d.setAttribute(h,m)}catch(g){this.warn("An error occurred may due to the checkout feature.",g)}else if(h==="style"){const g=m,p=d;for(const v in g)if(g[v]===!1)p.style.removeProperty(v);else if(g[v]instanceof Array){const f=g[v];p.style.setProperty(v,f[0],f[1])}else{const f=g[v];p.style.setProperty(v,f)}}}})}applyScroll(e,r){var n,o;const i=this.mirror.getNode(e.id);if(!i)return this.debugNodeNotFound(e,e.id);const l=this.mirror.getMeta(i);if(i===this.iframe.contentDocument)(n=this.iframe.contentWindow)==null||n.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else if(l?.type===O.Document)(o=i.defaultView)==null||o.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"});else try{i.scrollTo({top:e.y,left:e.x,behavior:r?"auto":"smooth"})}catch{}}applyInput(e){const r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(e,e.id);try{r.checked=e.isChecked,r.value=e.text}catch{}}applySelection(e){try{const r=new Set,n=e.ranges.map(({start:o,startOffset:i,end:l,endOffset:a})=>{const s=this.mirror.getNode(o),c=this.mirror.getNode(l);if(!s||!c)return;const u=new Range;u.setStart(s,i),u.setEnd(c,a);const d=s.ownerDocument,h=d?.getSelection();return h&&r.add(h),{range:u,selection:h}});r.forEach(o=>o.removeAllRanges()),n.forEach(o=>{var i;return o&&((i=o.selection)==null?void 0:i.addRange(o.range))})}catch{}}applyStyleSheetMutation(e){var r;let n=null;e.styleId?n=this.styleMirror.getStyle(e.styleId):e.id&&(n=((r=this.mirror.getNode(e.id))==null?void 0:r.sheet)||null),n&&(e.source===M.StyleSheetRule?this.applyStyleSheetRule(e,n):e.source===M.StyleDeclaration&&this.applyStyleDeclaration(e,n))}applyStyleSheetRule(e,r){var n,o,i,l;if((n=e.adds)==null||n.forEach(({rule:a,index:s})=>{try{if(Array.isArray(s)){const{positions:c,index:u}=zt(s);$e(r.cssRules,c).insertRule(a,u)}else{const c=s===void 0?void 0:Math.min(s,r.cssRules.length);r?.insertRule(a,c)}}catch{}}),(o=e.removes)==null||o.forEach(({index:a})=>{try{if(Array.isArray(a)){const{positions:s,index:c}=zt(a);$e(r.cssRules,s).deleteRule(c||0)}else r?.deleteRule(a)}catch{}}),e.replace)try{(i=r.replace)==null||i.call(r,e.replace)}catch{}if(e.replaceSync)try{(l=r.replaceSync)==null||l.call(r,e.replaceSync)}catch{}}applyStyleDeclaration(e,r){e.set&&$e(r.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&$e(r.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var r;const n=this.mirror.getNode(e.id);if(!n)return;(r=e.styles)==null||r.forEach(a=>{var s;let c=null,u=null;if(Ce(n)?u=((s=n.ownerDocument)==null?void 0:s.defaultView)||null:n.nodeName==="#document"&&(u=n.defaultView),!!u)try{c=new u.CSSStyleSheet,this.styleMirror.add(c,a.styleId),this.applyStyleSheetRule({source:M.StyleSheetRule,adds:a.rules},c)}catch{}});const o=10;let i=0;const l=(a,s)=>{const c=s.map(u=>this.styleMirror.getStyle(u)).filter(u=>u!==null);Ce(a)?a.shadowRoot.adoptedStyleSheets=c:a.nodeName==="#document"&&(a.adoptedStyleSheets=c),c.length!==s.length&&i<o&&(setTimeout(()=>l(a,s),0+100*i),i++)};l(n,e.styleIds)}legacy_resolveMissingNode(e,r,n,o){const{previousId:i,nextId:l}=o,a=i&&e[i],s=l&&e[l];if(a){const{node:c,mutation:u}=a;r.insertBefore(c,n),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,r,c,u)}if(s){const{node:c,mutation:u}=s;r.insertBefore(c,n.nextSibling),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,r,c,u)}}moveAndHover(e,r,n,o,i){const l=this.mirror.getNode(n);if(!l)return this.debugNodeNotFound(i,n);const a=Vt(l,this.iframe),s=e*a.absoluteScale+a.x,c=r*a.absoluteScale+a.y;this.mouse.style.left=`${s}px`,this.mouse.style.top=`${c}px`,o||this.drawMouseTail({x:s,y:c}),this.hoverElements(l)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:r,lineWidth:n,strokeStyle:o,duration:i}=this.config.mouseTail===!0?ir:Object.assign({},ir,this.config.mouseTail),l=()=>{if(!this.mouseTail)return;const a=this.mouseTail.getContext("2d");!a||!this.tailPositions.length||(a.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),a.beginPath(),a.lineWidth=n,a.lineCap=r,a.strokeStyle=o,a.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(s=>a.lineTo(s.x,s.y)),a.stroke())};this.tailPositions.push(e),l(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(a=>a!==e),l()},i/this.speedService.state.context.timer.speed)}hoverElements(e){var r;(r=this.lastHoveredRootNode||this.iframe.contentDocument)==null||r.querySelectorAll(".\\:hover").forEach(o=>{o.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let n=e;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(e){return e.type!==N.IncrementalSnapshot?!1:e.data.source>M.Mutation&&e.data.source<=M.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(F.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,r){this.warn(`Node with id '${r}' not found. `,e)}warnCanvasMutationFailed(e,r){this.warn("Has error on canvas update",r,"canvas mutation:",e)}debugNodeNotFound(e,r){this.debug(`Node with id '${r}' not found. `,e)}warn(...e){!this.config.showWarning||this.config.logger.warn(Gn,...e)}debug(...e){!this.config.showDebug||this.config.logger.log(Gn,...e)}}const{addCustomEvent:Yi}=Re,{freezePage:Xi}=Re;var se=Uint8Array,le=Uint16Array,ot=Uint32Array,Nt=new se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),It=new se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ar=new se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xn=function(t,e){for(var r=new le(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var o=new ot(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)o[i]=i-r[n]<<5|n;return[r,o]},qn=Xn(Nt,2),Jn=qn[0],lr=qn[1];Jn[28]=258,lr[258]=28;for(var Qn=Xn(It,0),qi=Qn[0],Kn=Qn[1],cr=new le(32768),X=0;X<32768;++X){var ke=(X&43690)>>>1|(X&21845)<<1;ke=(ke&52428)>>>2|(ke&13107)<<2,ke=(ke&61680)>>>4|(ke&3855)<<4,cr[X]=((ke&65280)>>>8|(ke&255)<<8)>>>1}for(var ye=function(t,e,r){for(var n=t.length,o=0,i=new le(e);o<n;++o)++i[t[o]-1];var l=new le(e);for(o=0;o<e;++o)l[o]=l[o-1]+i[o-1]<<1;var a;if(r){a=new le(1<<e);var s=15-e;for(o=0;o<n;++o)if(t[o])for(var c=o<<4|t[o],u=e-t[o],d=l[t[o]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[cr[d]>>>s]=c}else for(a=new le(n),o=0;o<n;++o)a[o]=cr[l[t[o]-1]++]>>>15-t[o];return a},De=new se(288),X=0;X<144;++X)De[X]=8;for(var X=144;X<256;++X)De[X]=9;for(var X=256;X<280;++X)De[X]=7;for(var X=280;X<288;++X)De[X]=8;for(var st=new se(32),X=0;X<32;++X)st[X]=5;var Ji=ye(De,9,0),Qi=ye(De,9,1),Ki=ye(st,5,0),Zi=ye(st,5,1),ur=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},fe=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(e&7)&r},dr=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},hr=function(t){return(t/8>>0)+(t&7&&1)},pr=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof le?le:t instanceof ot?ot:se)(r-e);return n.set(t.subarray(e,r)),n},ea=function(t,e,r){var n=t.length,o=!e||r,i=!r||r.i;r||(r={}),e||(e=new se(n*3));var l=function(Ge){var pe=e.length;if(Ge>pe){var ue=new se(Math.max(pe*2,Ge));ue.set(e),e=ue}},a=r.f||0,s=r.p||0,c=r.b||0,u=r.l,d=r.d,h=r.m,m=r.n,g=n*8;do{if(!u){r.f=a=fe(t,s,1);var p=fe(t,s+1,3);if(s+=3,p)if(p==1)u=Qi,d=Zi,h=9,m=5;else if(p==2){var y=fe(t,s,31)+257,w=fe(t,s+10,15)+4,T=y+fe(t,s+5,31)+1;s+=14;for(var D=new se(T),A=new se(19),C=0;C<w;++C)A[ar[C]]=fe(t,s+C*3,7);s+=w*3;var z=ur(A),V=(1<<z)-1;if(!i&&s+T*(z+7)>g)break;for(var re=ye(A,z,1),C=0;C<T;){var k=re[fe(t,s,V)];s+=k&15;var v=k>>>4;if(v<16)D[C++]=v;else{var Y=0,P=0;for(v==16?(P=3+fe(t,s,3),s+=2,Y=D[C-1]):v==17?(P=3+fe(t,s,7),s+=3):v==18&&(P=11+fe(t,s,127),s+=7);P--;)D[C++]=Y}}var H=D.subarray(0,y),$=D.subarray(y);h=ur(H),m=ur($),u=ye(H,h,1),d=ye($,m,1)}else throw"invalid block type";else{var v=hr(s)+4,f=t[v-4]|t[v-3]<<8,S=v+f;if(S>n){if(i)throw"unexpected EOF";break}o&&l(c+f),e.set(t.subarray(v,S),c),r.b=c+=f,r.p=s=S*8;continue}if(s>g)throw"unexpected EOF"}o&&l(c+131072);for(var R=(1<<h)-1,J=(1<<m)-1,ne=h+m+18;i||s+ne<g;){var Y=u[dr(t,s)&R],E=Y>>>4;if(s+=Y&15,s>g)throw"unexpected EOF";if(!Y)throw"invalid length/literal";if(E<256)e[c++]=E;else if(E==256){u=null;break}else{var b=E-254;if(E>264){var C=E-257,I=Nt[C];b=fe(t,s,(1<<I)-1)+Jn[C],s+=I}var _=d[dr(t,s)&J],j=_>>>4;if(!_)throw"invalid distance";s+=_&15;var $=qi[j];if(j>3){var I=It[j];$+=dr(t,s)&(1<<I)-1,s+=I}if(s>g)throw"unexpected EOF";o&&l(c+131072);for(var B=c+b;c<B;c+=4)e[c]=e[c-$],e[c+1]=e[c+1-$],e[c+2]=e[c+2-$],e[c+3]=e[c+3-$];c=B}}r.l=u,r.p=s,r.b=c,u&&(a=1,r.m=h,r.d=d,r.n=m)}while(!a);return c==e.length?e:pr(e,0,c)},be=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},it=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},mr=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var o=r.length,i=r.slice();if(!o)return[new se(0),0];if(o==1){var l=new se(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort(function(T,D){return T.f-D.f}),r.push({s:-1,f:25001});var a=r[0],s=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:a.f+s.f,l:a,r:s};u!=o-1;)a=r[r[c].f<r[d].f?c++:d++],s=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:a.f+s.f,l:a,r:s};for(var h=i[0].s,n=1;n<o;++n)i[n].s>h&&(h=i[n].s);var m=new le(h+1),g=fr(r[u-1],m,0);if(g>e){var n=0,p=0,v=g-e,f=1<<v;for(i.sort(function(D,A){return m[A.s]-m[D.s]||D.f-A.f});n<o;++n){var S=i[n].s;if(m[S]>e)p+=f-(1<<g-m[S]),m[S]=e;else break}for(p>>>=v;p>0;){var y=i[n].s;m[y]<e?p-=1<<e-m[y]++-1:++n}for(;n>=0&&p;--n){var w=i[n].s;m[w]==e&&(--m[w],++p)}g=e}return[new se(m),g]},fr=function(t,e,r){return t.s==-1?Math.max(fr(t.l,e,r+1),fr(t.r,e,r+1)):e[t.s]=r},Zn=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new le(++e),n=0,o=t[0],i=1,l=function(s){r[n++]=s},a=1;a<=e;++a)if(t[a]==o&&a!=e)++i;else{if(!o&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(o),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(o);i=1,o=t[a]}return[r.subarray(0,n),e]},at=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},kt=function(t,e,r){var n=r.length,o=hr(e+2);t[o]=n&255,t[o+1]=n>>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var i=0;i<n;++i)t[o+i+4]=r[i];return(o+4+n)*8},eo=function(t,e,r,n,o,i,l,a,s,c,u){be(e,u++,r),++o[256];for(var d=mr(o,15),h=d[0],m=d[1],g=mr(i,15),p=g[0],v=g[1],f=Zn(h),S=f[0],y=f[1],w=Zn(p),T=w[0],D=w[1],A=new le(19),C=0;C<S.length;++C)A[S[C]&31]++;for(var C=0;C<T.length;++C)A[T[C]&31]++;for(var z=mr(A,7),V=z[0],re=z[1],k=19;k>4&&!V[ar[k-1]];--k);var Y=c+5<<3,P=at(o,De)+at(i,st)+l,H=at(o,h)+at(i,p)+l+14+3*k+at(A,V)+(2*A[16]+3*A[17]+7*A[18]);if(Y<=P&&Y<=H)return kt(e,u,t.subarray(s,s+c));var $,R,J,ne;if(be(e,u,1+(H<P)),u+=2,H<P){$=ye(h,m,0),R=h,J=ye(p,v,0),ne=p;var E=ye(V,re,0);be(e,u,y-257),be(e,u+5,D-1),be(e,u+10,k-4),u+=14;for(var C=0;C<k;++C)be(e,u+3*C,V[ar[C]]);u+=3*k;for(var b=[S,T],I=0;I<2;++I)for(var _=b[I],C=0;C<_.length;++C){var j=_[C]&31;be(e,u,E[j]),u+=V[j],j>15&&(be(e,u,_[C]>>>5&127),u+=_[C]>>>12)}}else $=Ji,R=De,J=Ki,ne=st;for(var C=0;C<a;++C)if(n[C]>255){var j=n[C]>>>18&31;it(e,u,$[j+257]),u+=R[j+257],j>7&&(be(e,u,n[C]>>>23&31),u+=Nt[j]);var B=n[C]&31;it(e,u,J[B]),u+=ne[B],B>3&&(it(e,u,n[C]>>>5&8191),u+=It[B])}else it(e,u,$[n[C]]),u+=R[n[C]];return it(e,u,$[256]),u+R[256]},ta=new ot([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ra=new se(0),na=function(t,e,r,n,o,i){var l=t.length,a=new se(n+l+5*(1+Math.floor(l/7e3))+o),s=a.subarray(n,a.length-o),c=0;if(!e||l<8)for(var u=0;u<=l;u+=65535){var d=u+65535;d<l?c=kt(s,c,t.subarray(u,d)):(s[u]=i,c=kt(s,c,t.subarray(u,l)))}else{for(var h=ta[e-1],m=h>>>13,g=h&8191,p=(1<<r)-1,v=new le(32768),f=new le(p+1),S=Math.ceil(r/3),y=2*S,w=function(oe){return(t[oe]^t[oe+1]<<S^t[oe+2]<<y)&p},T=new ot(25e3),D=new le(288),A=new le(32),C=0,z=0,u=0,V=0,re=0,k=0;u<l;++u){var Y=w(u),P=u&32767,H=f[Y];if(v[P]=H,f[Y]=P,re<=u){var $=l-u;if((C>7e3||V>24576)&&$>423){c=eo(t,s,0,T,D,A,z,V,k,u-k,c),V=C=z=0,k=u;for(var R=0;R<286;++R)D[R]=0;for(var R=0;R<30;++R)A[R]=0}var J=2,ne=0,E=g,b=P-H&32767;if($>2&&Y==w(u-b))for(var I=Math.min(m,$)-1,_=Math.min(32767,u),j=Math.min(258,$);b<=_&&--E&&P!=H;){if(t[u+J]==t[u+J-b]){for(var B=0;B<j&&t[u+B]==t[u+B-b];++B);if(B>J){if(J=B,ne=b,B>I)break;for(var Ge=Math.min(b,B-2),pe=0,R=0;R<Ge;++R){var ue=u-b+R+32768&32767,lt=v[ue],xe=ue-lt+32768&32767;xe>pe&&(pe=xe,H=ue)}}}P=H,H=v[P],b+=P-H+32768&32767}if(ne){T[V++]=268435456|lr[J]<<18|Kn[ne];var x=lr[J]&31,de=Kn[ne]&31;z+=Nt[x]+It[de],++D[257+x],++A[de],re=u+J,++C}else T[V++]=t[u],++D[t[u]]}}c=eo(t,s,i,T,D,A,z,V,k,u-k,c),i||(c=kt(s,c,ra))}return pr(a,0,n+hr(c)+o)},oa=function(){var t=1,e=0;return{p:function(r){for(var n=t,o=e,i=r.length,l=0;l!=i;){for(var a=Math.min(l+5552,i);l<a;++l)n+=r[l],o+=n;n%=65521,o%=65521}t=n,e=o},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},sa=function(t,e,r,n,o){return na(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!o)},ia=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},aa=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},la=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ca(t,e){e===void 0&&(e={});var r=oa();r.p(t);var n=sa(t,e,2,4);return aa(n,e),ia(n,n.length-4,r.d()),n}function ua(t,e){return ea((la(t),t.subarray(2,-4)),e)}function to(t,e){var r=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var n=new se(t.length+(t.length>>>1)),o=0,i=function(c){n[o++]=c},l=0;l<r;++l){if(o+5>n.length){var a=new se(o+8+(r-l<<1));a.set(n),n=a}var s=t.charCodeAt(l);s<128||e?i(s):s<2048?(i(192|s>>>6),i(128|s&63)):s>55295&&s<57344?(s=65536+(s&1047552)|t.charCodeAt(++l)&1023,i(240|s>>>18),i(128|s>>>12&63),i(128|s>>>6&63),i(128|s&63)):(i(224|s>>>12),i(128|s>>>6&63),i(128|s&63))}return pr(n,0,o)}function ro(t,e){var r="";if(!e&&typeof TextDecoder<"u")return new TextDecoder().decode(t);for(var n=0;n<t.length;){var o=t[n++];o<128||e?r+=String.fromCharCode(o):o<224?r+=String.fromCharCode((o&31)<<6|t[n++]&63):o<240?r+=String.fromCharCode((o&15)<<12|(t[n++]&63)<<6|t[n++]&63):(o=((o&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}return r}const gr="v1";var da=Object.defineProperty,ha=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,no=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,oo=(t,e,r)=>e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ga=(t,e)=>{for(var r in e||(e={}))ma.call(e,r)&&oo(t,r,e[r]);if(no)for(var r of no(e))fa.call(e,r)&&oo(t,r,e[r]);return t},ya=(t,e)=>ha(t,pa(e));const va=t=>{const e=ya(ga({},t),{v:gr});return ro(ca(to(JSON.stringify(e))),!0)},Sa=t=>{if(typeof t!="string")return t;try{const e=JSON.parse(t);if(e.timestamp)return e}catch{}try{const e=JSON.parse(ro(ua(to(t,!0))));if(e.v===gr)return e;throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${gr}.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}};class ze{constructor(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",r=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${r})`:`${this.fileName}:${e}:${r}`}}const ba=/(^|@)\S+:\d+/,so=/^\s*at .*(\S+:\d+|\(native\))/m,wa=/^(eval@)?(\[native code])?$/,yr={parse:function(t){return t?typeof t.stacktrace<"u"||typeof t["opera#sourceloc"]<"u"?this.parseOpera(t):t.stack&&t.stack.match(so)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):(console.warn("[console-record-plugin]: Failed to parse error object:",t),[]):[]},extractLocation:function(t){if(t.indexOf(":")===-1)return[t];const e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));if(!e)throw new Error(`Cannot parse given url: ${t}`);return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(so)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=r.match(/ (\((.+):(\d+):(\d+)\)$)/);r=n?r.replace(n[0],""):r;const o=r.split(/\s+/).slice(1),i=this.extractLocation(n?n[1]:o.pop()),l=o.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new ze({functionName:l,fileName:a,lineNumber:i[1],columnNumber:i[2]})},this)},parseFFOrSafari:function(t){return t.stack.split(`
`).filter(function(e){return!e.match(wa)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),e.indexOf("@")===-1&&e.indexOf(":")===-1)return new ze({functionName:e});{const r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(r),o=n&&n[1]?n[1]:void 0,i=this.extractLocation(e.replace(r,""));return new ze({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2]})}},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf(`
`)>-1&&t.message.split(`
`).length>t.stacktrace.split(`
`).length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){const e=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split(`
`),n=[];for(let o=2,i=r.length;o<i;o+=2){const l=e.exec(r[o]);l&&n.push(new ze({fileName:l[2],lineNumber:parseFloat(l[1])}))}return n},parseOpera10:function(t){const e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split(`
`),n=[];for(let o=0,i=r.length;o<i;o+=2){const l=e.exec(r[o]);l&&n.push(new ze({functionName:l[3]||void 0,fileName:l[2],lineNumber:parseFloat(l[1])}))}return n},parseOpera11:function(t){return t.stack.split(`
`).filter(function(e){return!!e.match(ba)&&!e.match(/^Error created at/)},this).map(function(e){const r=e.split("@"),n=this.extractLocation(r.pop()),o=(r.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new ze({functionName:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})},this)}};function Ea(t){if(!t||!t.outerHTML)return"";let e="";for(;t.parentElement;){let r=t.localName;if(!r)break;r=r.toLowerCase();const n=t.parentElement,o=[];if(n.children&&n.children.length>0)for(let i=0;i<n.children.length;i++){const l=n.children[i];l.localName&&l.localName.toLowerCase&&l.localName.toLowerCase()===r&&o.push(l)}o.length>1&&(r+=`:eq(${o.indexOf(t)})`),e=r+(e?">"+e:""),t=n}return e}function vr(t){return Object.prototype.toString.call(t)==="[object Object]"}function io(t,e){if(e===0)return!0;const r=Object.keys(t);for(const n of r)if(vr(t[n])&&io(t[n],e-1))return!0;return!1}function He(t,e){const r={numOfKeysLimit:50,depthOfLimit:4};Object.assign(r,e);const n=[],o=[];return JSON.stringify(t,function(a,s){if(n.length>0){const c=n.indexOf(this);~c?n.splice(c+1):n.push(this),~c?o.splice(c,1/0,a):o.push(a),~n.indexOf(s)&&(n[0]===s?s="[Circular ~]":s="[Circular ~."+o.slice(0,n.indexOf(s)).join(".")+"]")}else n.push(s);if(s===null)return s;if(s===void 0)return"undefined";if(i(s))return l(s);if(typeof s=="bigint")return s.toString()+"n";if(s instanceof Event){const c={};for(const u in s){const d=s[u];Array.isArray(d)?c[u]=Ea(d.length?d[0]:null):c[u]=d}return c}else{if(s instanceof Node)return s instanceof HTMLElement?s?s.outerHTML:"":s.nodeName;if(s instanceof Error)return s.stack?s.stack+`
End of stack for Error object`:s.name+": "+s.message}return s});function i(a){return!!(vr(a)&&Object.keys(a).length>r.numOfKeysLimit||typeof a=="function"||vr(a)&&io(a,r.depthOfLimit))}function l(a){let s=a.toString();return r.stringLengthLimit&&s.length>r.stringLengthLimit&&(s=`${s.slice(0,r.stringLengthLimit)}...`),s}}const ao={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Ma(t,e,r){const n=r?Object.assign({},ao,r):ao,o=n.logger;if(!o)return()=>{};let i;typeof o=="string"?i=e[o]:i=o;let l=0,a=!1;const s=[];if(n.level.includes("error")){const u=h=>{const m=h.message,g=h.error,p=yr.parse(g).map(f=>f.toString()),v=[He(m,n.stringifyOptions)];t({level:"error",trace:p,payload:v})};e.addEventListener("error",u),s.push(()=>{e.removeEventListener("error",u)});const d=h=>{let m,g;h.reason instanceof Error?(m=h.reason,g=[He(`Uncaught (in promise) ${m.name}: ${m.message}`,n.stringifyOptions)]):(m=new Error,g=[He("Uncaught (in promise)",n.stringifyOptions),He(h.reason,n.stringifyOptions)]);const p=yr.parse(m).map(v=>v.toString());t({level:"error",trace:p,payload:g})};e.addEventListener("unhandledrejection",d),s.push(()=>{e.removeEventListener("unhandledrejection",d)})}for(const u of n.level)s.push(c(i,u));return()=>{s.forEach(u=>u())};function c(u,d){return u[d]?Me(u,d,h=>(...m)=>{if(h.apply(this,m),!a){a=!0;try{const g=yr.parse(new Error).map(v=>v.toString()).splice(1),p=m.map(v=>He(v,n.stringifyOptions));l++,l<n.lengthThreshold?t({level:d,trace:g,payload:p}):l===n.lengthThreshold&&t({level:"warn",trace:[],payload:[He("The number of log records reached the threshold.")]})}catch(g){h("rrweb logger error:",g,...m)}finally{a=!1}}}):()=>{}}}const Sr="rrweb/console@1",Ca=t=>({name:Sr,observer:Ma,options:t}),Dt="__rrweb_original__",Ta={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class Na{constructor(e){this.config=Object.assign(Ta,e)}getConsoleLogger(){const e={};for(const r of this.config.level)r==="trace"?e[r]=n=>{(console.log[Dt]?console.log[Dt]:console.log)(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))}:e[r]=n=>{(console[r][Dt]?console[r][Dt]:console[r])(...n.payload.map(o=>JSON.parse(o)),this.formatMessage(n))};return e}formatMessage(e){if(e.trace.length===0)return"";const r=`
	at `;let n=r;return n+=e.trace.join(r),n}}const Ia=t=>{const e=t?.replayLogger||new Na(t).getConsoleLogger();return{handler(r,n,o){let i=null;if(r.type===N.IncrementalSnapshot&&r.data.source===M.Log?i=r.data:r.type===N.Plugin&&r.data.plugin===Sr&&(i=r.data.payload),i)try{typeof e[i.level]=="function"&&e[i.level](i)}catch(l){o.replayer.config.showWarning&&console.warn(l)}}}};return ee.EventType=N,ee.IncrementalSource=M,ee.MouseInteractions=W,ee.PLUGIN_NAME=Sr,ee.Replayer=Gi,ee.ReplayerEvents=F,ee.addCustomEvent=Yi,ee.canvasMutation=nr,ee.freezePage=Xi,ee.getRecordConsolePlugin=Ca,ee.getReplayConsolePlugin=Ia,ee.pack=va,ee.record=Re,ee.unpack=Sa,ee.utils=Go,Object.defineProperty(ee,"__esModule",{value:!0}),ee}({});
//# sourceMappingURL=rrweb-all.min.js.map
